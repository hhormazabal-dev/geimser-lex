(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71],{23838:(e,a,s)=>{"use strict";s.d(a,{b:()=>n});var t=s(97451),l=s(31010),r=s(11291),i=t.forwardRef((e,a)=>(0,r.jsx)(l.sG.label,{...e,ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var n=i},25126:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,64787,23)),Promise.resolve().then(s.bind(s,96863))},26181:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(92608).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},31010:(e,a,s)=>{"use strict";s.d(a,{hO:()=>c,sG:()=>n});var t=s(97451),l=s(8970),r=s(26809),i=s(11291),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=(0,r.TL)(`Primitive.${a}`),l=t.forwardRef((e,t)=>{let{asChild:l,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(l?s:a,{...r,ref:t})});return l.displayName=`Primitive.${a}`,{...e,[a]:l}},{});function c(e,a){e&&l.flushSync(()=>e.dispatchEvent(a))}},40918:(e,a,s)=>{"use strict";s.d(a,{p:()=>i});var t=s(11291),l=s(97451),r=s(93293);let i=l.forwardRef((e,a)=>{let{className:s,type:l,...i}=e;return(0,t.jsx)("input",{type:l,className:(0,r.cn)("flex h-11 w-full rounded-2xl border border-white/30 bg-white/70 px-4 text-sm text-foreground/80 shadow-inner ring-offset-transparent transition-all placeholder:text-foreground/40 focus-visible:border-primary focus-visible:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60",s),ref:a,...i})});i.displayName="Input"},73244:(e,a,s)=>{"use strict";s.d(a,{J:()=>o});var t=s(11291),l=s(97451),r=s(23838),i=s(11263),n=s(93293);let c=(0,i.F)("text-sm font-medium leading-none text-foreground/75 peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(r.b,{ref:a,className:(0,n.cn)(c(),s),...l})});o.displayName=r.b.displayName},96863:(e,a,s)=>{"use strict";s.d(a,{CaseDetailView:()=>L});var t=s(11291),l=s(97451),r=s(95876),i=s(82596),n=s(9983),c=s(90718),o=s(40918),d=s(73244),m=s(54997),x=s(14007),u=s(44722),p=s(25711),h=s(68668),b=s(93293),g=s(68630),j=s(59030);let f=(0,j.createServerReference)("6086c61dfb9231b4acbda11d41d490ece17f554ca3",j.callServer,void 0,j.findSourceMapURL,"authorizeCaseAdvance"),v=(0,j.createServerReference)("40b228871e08ee0563c69a2ce1a6851a34ef104dd6",j.callServer,void 0,j.findSourceMapURL,"createCaseCounterparty"),N=(0,j.createServerReference)("403ddfd9f5f8e8c23ba6b0bfb8928b426a8816361a",j.callServer,void 0,j.findSourceMapURL,"deleteCaseCounterparty");var y=s(69719),w=s(96843),_=s(68671),A=s(64501),C=s(26181),z=s(92608);let S=(0,z.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var R=s(62490);let k=(0,z.A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var M=s(27416),E=s(77297),P=s(89740),q=s(90465),I=s(87917),D=s(23403),U=s(77230),F=s(94724);function L(e){var a,s,j,z,L,T,$,Z,O,G,J,V,B;let{case:H,profile:W,messages:Y}=e,[X,K]=(0,l.useState)("overview"),Q=(0,r.useRouter)(),{toast:ee}=(0,g.dj)(),[ea,es]=(0,l.useState)(null!=(s=H.case_stages)?s:[]),[et,el]=(0,l.useState)({solicitado:null!=(j=H.alcance_cliente_solicitado)?j:0,autorizado:null!=(z=H.alcance_cliente_autorizado)?z:0}),[er,ei]=(0,l.useState)(null!=(L=H.counterparties)?L:[]),[en,ec]=(0,l.useState)({nombre:"",rut:"",tipo:"demandado"}),[eo,ed]=(0,l.useTransition)(),[em,ex]=(0,l.useState)(null),eu=(0,l.useMemo)(()=>{let e=new Map;return ea.forEach(a=>{var s;let t=null!=(s=a.orden)?s:0;t>0&&!e.has(t)&&e.set(t,a.etapa)}),e},[ea]),ep=et.solicitado>0&&null!=(T=eu.get(et.solicitado))?T:null,eh=et.autorizado>0&&null!=($=eu.get(et.autorizado))?$:null,[eb,eg]=(0,l.useState)(!1);(0,l.useEffect)(()=>{var e;es(null!=(e=H.case_stages)?e:[])},[H.case_stages]),(0,l.useEffect)(()=>{var e,a;el({solicitado:null!=(e=H.alcance_cliente_solicitado)?e:0,autorizado:null!=(a=H.alcance_cliente_autorizado)?a:0})},[H.alcance_cliente_solicitado,H.alcance_cliente_autorizado]),(0,l.useEffect)(()=>{var e;ei(null!=(e=H.counterparties)?e:[])},[H.counterparties]);let ej="admin_firma"===W.role||"abogado"===W.role&&(null==(a=H.abogado_responsable)?void 0:a.id)===W.id,ef="cliente"!==W.role,ev="cliente"!==W.role,eN="cliente"!==W.role,ey=e=>null==e||Number.isNaN(e)?"â€”":"".concat(new Intl.NumberFormat("es-CL",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)," UF"),ew=null!=(Z=H.honorario_total_uf)?Z:null,e_=null!=(O=H.honorario_pagado_uf)?O:0,eA=null!==ew?Math.max(ew-e_,0):null,eC=async e=>{if(e&&!(e<=0)){eg(!0);try{var a,s,t;let l=await f(H.id,e);if(l.success){let t=null!=(a=l.authorizedOrder)?a:e;el(e=>({...e,autorizado:t})),ee({title:"Avance autorizado",description:"Se autoriz\xf3 avanzar hasta ".concat(null!=(s=eu.get(t))?s:"la etapa ".concat(t),".")}),Q.refresh()}else ee({title:"No se pudo autorizar",description:null!=(t=l.error)?t:"Intenta nuevamente en unos minutos.",variant:"destructive"})}catch(e){console.error("Error authorizing advance",e),ee({title:"Error inesperado",description:"No fue posible autorizar el avance solicitado.",variant:"destructive"})}finally{eg(!1)}}},ez=(e,a)=>{ec(s=>({...s,[e]:a}))},eS=async e=>{e.preventDefault(),ed(async()=>{let e=await v({caseId:H.id,nombre:en.nombre,rut:en.rut||void 0,tipo:en.tipo});e.success?(ei(a=>[e.counterparty,...a]),ec({nombre:"",rut:"",tipo:"demandado"}),ee({title:"Contraparte agregada",description:"Registramos la contraparte en el expediente."})):ee({title:"No se pudo agregar la contraparte",description:e.error,variant:"destructive"})})},eR=async e=>{ex(e);try{let a=await N({id:e});a.success?(ei(a=>a.filter(a=>a.id!==e)),ee({title:"Contraparte eliminada"})):ee({title:"No se pudo eliminar la contraparte",description:a.error,variant:"destructive"})}finally{ex(null)}},ek=[{id:"overview",label:"Resumen",icon:y.A},{id:"timeline",label:"Timeline",icon:w.A},{id:"documents",label:"Documentos",icon:_.A},{id:"notes",label:"Notas",icon:A.A},{id:"messages",label:"Mensajes",icon:A.A},{id:"requests",label:"Solicitudes",icon:A.A},...ej?[{id:"clients",label:"Clientes",icon:C.A}]:[]];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(c.$,{variant:"ghost",size:"sm",onClick:()=>Q.back(),children:[(0,t.jsx)(S,{className:"h-4 w-4 mr-2"}),"Volver"]}),(0,t.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,t.jsx)(y.A,{className:"h-6 w-6 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Detalle del Caso"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Xel Chile"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[ej&&(0,t.jsxs)(c.$,{size:"sm",variant:"outline",children:[(0,t.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"Editar Caso"]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:W.nombre}),(0,t.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:W.role.replace("_"," ")})]}),(0,t.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-white font-medium text-sm",style:{backgroundColor:(0,b.qA)(W.nombre)},children:(0,b.IM)(W.nombre)})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)(i.Zp,{className:"mb-8",children:(0,t.jsxs)(i.Wu,{className:"pt-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:H.caratulado}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-4",children:[H.numero_causa&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(y.A,{className:"h-4 w-4 mr-1"}),"Causa: ",H.numero_causa]}),H.materia&&(0,t.jsxs)("span",{children:["Materia: ",H.materia]}),H.tribunal&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(k,{className:"h-4 w-4 mr-1"}),H.tribunal]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(V=H.estado||"activo",(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({activo:"bg-green-100 text-green-800",suspendido:"bg-yellow-100 text-yellow-800",archivado:"bg-gray-100 text-gray-800",terminado:"bg-blue-100 text-blue-800"}[V]||"bg-gray-100 text-gray-800"),children:V.charAt(0).toUpperCase()+V.slice(1)})),H.prioridad&&(B=H.prioridad,(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({baja:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",urgente:"bg-red-100 text-red-800"}[B]||"bg-gray-100 text-gray-800"),children:B.charAt(0).toUpperCase()+B.slice(1)})),H.etapa_actual&&(0,t.jsx)(n.E,{variant:"outline",children:H.etapa_actual})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[H.abogado_responsable&&(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"font-medium text-blue-900 mb-2 flex items-center",children:[(0,t.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Abogado Responsable"]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsx)("p",{className:"font-medium text-blue-800",children:H.abogado_responsable.nombre}),H.abogado_responsable.telefono&&(0,t.jsxs)("p",{className:"flex items-center text-blue-700",children:[(0,t.jsx)(E.A,{className:"h-3 w-3 mr-1"}),H.abogado_responsable.telefono]}),H.abogado_responsable.email&&(0,t.jsxs)("p",{className:"flex items-center text-blue-700",children:[(0,t.jsx)(P.A,{className:"h-3 w-3 mr-1"}),H.abogado_responsable.email]})]})]}),H.nombre_cliente&&(0,t.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"font-medium text-green-900 mb-2 flex items-center",children:[(0,t.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Cliente"]}),(0,t.jsx)("p",{className:"text-sm font-medium text-green-800",children:H.nombre_cliente}),H.rut_cliente&&(0,t.jsxs)("p",{className:"text-sm text-green-700",children:["RUT: ",H.rut_cliente]})]}),(0,t.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"font-medium text-purple-900 mb-2 flex items-center",children:[(0,t.jsx)(q.A,{className:"h-4 w-4 mr-2"}),"Fechas"]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-purple-700",children:[H.fecha_inicio&&(0,t.jsxs)("p",{children:["Inicio: ",(0,b.Yq)(H.fecha_inicio)]}),H.fecha_termino&&(0,t.jsxs)("p",{children:["T\xe9rmino: ",(0,b.Yq)(H.fecha_termino)]})]})]}),H.valor_estimado&&(0,t.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"font-medium text-yellow-900 mb-2 flex items-center",children:[(0,t.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Valor Estimado"]}),(0,t.jsx)("p",{className:"text-lg font-bold text-yellow-800",children:(0,b.vv)(H.valor_estimado)})]}),(et.solicitado>0||et.autorizado>0)&&(0,t.jsxs)("div",{className:"bg-sky-50 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"font-medium text-sky-900 mb-2 flex items-center",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Alcance del cliente"]}),(0,t.jsx)("p",{className:"text-sm text-sky-700",children:et.solicitado>0?"Solicitado: ".concat(null!=ep?ep:"Etapa ".concat(et.solicitado)):"Sin solicitudes vigentes"}),(0,t.jsx)("p",{className:"text-sm text-sky-700",children:et.autorizado>0?"Autorizado: ".concat(null!=eh?eh:"Etapa ".concat(et.autorizado)):"Aprobaci\xf3n pendiente"}),("admin_firma"===W.role||"analista"===W.role)&&et.solicitado>et.autorizado&&(0,t.jsx)(c.$,{size:"sm",className:"mt-3 inline-flex items-center gap-2 rounded-full bg-sky-600 text-white hover:bg-sky-700",onClick:()=>eC(et.solicitado),disabled:eb,children:eb?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.A,{className:"h-4 w-4 animate-spin"}),"Autorizandoâ€¦"]}):"Autorizar solicitud"})]}),(null!==ew||H.tarifa_referencia)&&(0,t.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,t.jsxs)("h3",{className:"font-medium text-indigo-900 mb-2 flex items-center",children:[(0,t.jsx)(U.A,{className:"h-4 w-4 mr-2"}),"Honorarios"]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-indigo-800",children:[H.modalidad_cobro&&(0,t.jsx)("p",{className:"uppercase text-xs tracking-wide text-indigo-600",children:H.modalidad_cobro}),null!==ew&&(0,t.jsxs)("p",{className:"font-semibold",children:["Total: ",ey(ew)]}),null!==ew&&(0,t.jsxs)("p",{children:["Pagado: ",ey(e_)]}),null!==eA&&(0,t.jsxs)("p",{children:["Pendiente: ",ey(eA)]}),H.honorario_variable_porcentaje&&(0,t.jsxs)("p",{children:["Variable: ",H.honorario_variable_porcentaje,"%",H.honorario_variable_base?" (".concat(H.honorario_variable_base,")"):""]}),H.tarifa_referencia&&(0,t.jsxs)("p",{className:"text-xs text-indigo-600",children:["Tarifa: ",H.tarifa_referencia]}),H.honorario_notas&&(0,t.jsx)("p",{className:"text-xs text-indigo-700 whitespace-pre-wrap",children:H.honorario_notas})]})]})]}),H.contraparte&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Contraparte"}),(0,t.jsx)("p",{className:"text-gray-700",children:H.contraparte})]}),H.observaciones&&(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Observaciones"}),(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:H.observaciones})]})]})}),(0,t.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:ek.map(e=>{let a=e.icon;return(0,t.jsxs)("button",{onClick:()=>K(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(X===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,t.jsx)(a,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.label})]},e.id)})})}),(0,t.jsxs)("div",{children:["overview"===X&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(u.S,{caseId:H.id,caseMateria:null!=(G=H.materia)?G:"General",canManageStages:ej,showPrivateStages:eN,clientContext:{role:"usuario"===W.role?"cliente":W.role,alcanceAutorizado:et.autorizado,alcanceSolicitado:et.solicitado},onClientProgressChange:e=>{el(a=>{var s,t;let l=null!=(s=e.solicitado)?s:a.solicitado,r=null!=(t=e.autorizado)?t:a.autorizado;return l===a.solicitado&&r===a.autorizado?a:{solicitado:l,autorizado:r}})},onStagesLoaded:es})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(x.$,{caseId:H.id,canUpload:ej,canEdit:ej,canDelete:ej,showPrivateDocuments:eN}),(0,t.jsx)(p.L,{caseId:H.id,canCreateRequests:!0,canRespondRequests:ev,showPrivateRequests:eN})]})]}),"timeline"===X&&(0,t.jsx)(u.S,{caseId:H.id,caseMateria:null!=(J=H.materia)?J:"General",canManageStages:ej,showPrivateStages:eN,clientContext:{role:"usuario"===W.role?"cliente":W.role,alcanceAutorizado:et.autorizado,alcanceSolicitado:et.solicitado},onClientProgressChange:e=>{el(a=>{var s,t;let l=null!=(s=e.solicitado)?s:a.solicitado,r=null!=(t=e.autorizado)?t:a.autorizado;return l===a.solicitado&&r===a.autorizado?a:{solicitado:l,autorizado:r}})},onStagesLoaded:es}),"documents"===X&&(0,t.jsx)(x.$,{caseId:H.id,canUpload:ej,canEdit:ej,canDelete:ej,showPrivateDocuments:eN}),"notes"===X&&(0,t.jsx)(m._,{caseId:H.id,canCreateNotes:ef,canEditNotes:ef,showPrivateNotes:eN}),"messages"===X&&(0,t.jsx)(h.B,{caseId:H.id,initialMessages:Y,currentProfileId:W.id,allowSend:"cliente"!==W.role}),"requests"===X&&(0,t.jsx)(p.L,{caseId:H.id,canCreateRequests:!0,canRespondRequests:ev,showPrivateRequests:eN}),"clients"===X&&ej&&(0,t.jsxs)("div",{className:"space-y-6",children:[H.clients&&H.clients.length>0&&(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"Clientes Asociados (",H.clients.length,")"]})}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)("div",{className:"space-y-3",children:H.clients.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-white font-medium",style:{backgroundColor:(0,b.qA)(e.nombre)},children:(0,b.IM)(e.nombre)}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.nombre}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(P.A,{className:"h-3 w-3 mr-1"}),e.email]}),e.telefono&&(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)(E.A,{className:"h-3 w-3 mr-1"}),e.telefono]})]})]})]}),(0,t.jsx)(n.E,{variant:"outline",children:"Cliente"})]},e.id))})})]}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"Contrapartes (demandados)"]})}),(0,t.jsxs)(i.Wu,{className:"space-y-6",children:[(0,t.jsxs)("form",{onSubmit:eS,className:"grid gap-4 md:grid-cols-[1.2fr_1fr_0.8fr_auto]",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{htmlFor:"counterparty_nombre",children:"Nombre completo *"}),(0,t.jsx)(o.p,{id:"counterparty_nombre",placeholder:"Empresa demandada o persona",value:en.nombre,onChange:e=>ez("nombre",e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{htmlFor:"counterparty_rut",children:"RUT"}),(0,t.jsx)(o.p,{id:"counterparty_rut",placeholder:"12.345.678-9",value:en.rut,onChange:e=>ez("rut",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.J,{htmlFor:"counterparty_tipo",children:"Rol"}),(0,t.jsxs)("select",{id:"counterparty_tipo",className:"form-input",value:en.tipo,onChange:e=>ez("tipo",e.target.value),children:[(0,t.jsx)("option",{value:"demandado",children:"Demandado"}),(0,t.jsx)("option",{value:"demandante",children:"Demandante"}),(0,t.jsx)("option",{value:"tercero",children:"Tercero"})]})]}),(0,t.jsx)("div",{className:"flex items-end",children:(0,t.jsx)(c.$,{type:"submit",className:"w-full",disabled:eo||en.nombre.trim().length<2,children:eo?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrandoâ€¦"]}):"Agregar"})})]}),(0,t.jsx)("div",{className:"space-y-3",children:0===er.length?(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"A\xfan no se agregan demandados al expediente. Reg\xedstralos para tener claridad de las partes involucradas."}):er.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm shadow-sm",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-medium text-slate-900",children:e.nombre}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs text-slate-500",children:[(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-0.5 text-[11px] uppercase tracking-wide text-slate-600",children:e.tipo.charAt(0).toUpperCase()+e.tipo.slice(1)}),e.rut&&(0,t.jsxs)("span",{children:["RUT: ",e.rut]}),(0,t.jsxs)("span",{children:["Agregado: ",e.created_at?(0,b.Yq)(e.created_at):"â€”"]})]})]}),(0,t.jsx)(c.$,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-full text-slate-400 hover:text-red-600",onClick:()=>eR(e.id),disabled:em===e.id,children:em===e.id?(0,t.jsx)(D.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(F.A,{className:"h-4 w-4"})})]},e.id))})]})]})]})]})]})]})}}},e=>{e.O(0,[936,787,577,4,927,193,55,358],()=>e(e.s=25126)),_N_E=e.O()}]);