(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{848:(e,a,r)=>{"use strict";r.d(a,{T:()=>t});var i=r(11291),o=r(97451),s=r(93293);let t=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)("textarea",{ref:a,className:(0,s.cn)("flex min-h-[100px] w-full rounded-2xl border border-white/30 bg-white/70 px-4 py-3 text-sm text-foreground/80 shadow-inner transition-all placeholder:text-foreground/40 focus-visible:border-primary focus-visible:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60",r),...o})});t.displayName="Textarea"},4546:(e,a,r)=>{"use strict";r.d(a,{CaseForm:()=>U});var i=r(11291),o=r(97451),s=r(95876),t=r(55167),l=r(32951),n=r(90718),d=r(40918),c=r(73244),m=r(82596),p=r(848),u=r(68630),h=r(59030);let x=(0,h.createServerReference)("601dc316dca099ac5c6111fb7c78b63a6a2296a56b",h.callServer,void 0,h.findSourceMapURL,"updateCase"),b=(0,h.createServerReference)("402238d93ed96f80b46537a5e0b468a17e405e77e2",h.callServer,void 0,h.findSourceMapURL,"createCase");var g=r(41782);let v=(0,h.createServerReference)("406bc1e57d930aa66be0c359227cb415ca860d3043",h.callServer,void 0,h.findSourceMapURL,"createClientProfile");var f=r(66383),j=r(1931);let _=f.Yj().optional().refine(function(e){if("string"!=typeof e||0===e.trim().length)return!0;let a=e.replace(/[^0-9kK]/g,"");if(a.length<8||a.length>9)return!1;let r=a.slice(0,-1),i=a.slice(-1).toUpperCase(),o=0,s=2;for(let e=r.length-1;e>=0;e--)o+=parseInt(r[e],10)*s,s=7===s?2:s+1;let t=11-o%11;return i===(11===t?"0":10===t?"K":String(t))},{message:"RUT inv\xe1lido"}),N=f.Ik({numero_causa:f.Yj().optional(),caratulado:f.Yj().min(1,"El caratulado es requerido").max(500,"El caratulado no puede exceder 500 caracteres"),materia:f.Yj().min(1,"La materia es requerida").max(100,"La materia no puede exceder 100 caracteres"),tribunal:f.Yj().optional(),region:f.Yj().optional(),comuna:f.Yj().optional(),rut_cliente:_,nombre_cliente:f.Yj().min(1,"El nombre del cliente es requerido").max(200,"El nombre no puede exceder 200 caracteres"),contraparte:f.Yj().optional(),etapa_actual:f.Yj().default("Ingreso Demanda"),estado:f.k5(["activo","suspendido","archivado","terminado"]).default("activo"),fecha_inicio:f.Yj().optional(),abogado_responsable:f.Yj().uuid("ID de abogado inv\xe1lido").optional(),analista_id:f.Yj().uuid("ID de analista inv\xe1lido").optional(),cliente_principal_id:f.Yj().uuid("ID de cliente inv\xe1lido").optional(),workflow_state:f.k5(["preparacion","en_revision","activo","cerrado"]).default("preparacion"),prioridad:f.k5(["baja","media","alta","urgente"]).default("media"),valor_estimado:f.ai().positive("El valor debe ser positivo").optional(),honorario_total_uf:f.ai().nonnegative("El honorario total debe ser positivo").optional(),honorario_pagado_uf:f.ai().nonnegative("El monto pagado debe ser positivo").optional(),honorario_variable_porcentaje:f.ai().min(0,"El porcentaje variable debe ser positivo").max(100,"El porcentaje variable no puede superar 100%").optional(),honorario_variable_base:f.Yj().max(1e3,"La base variable no puede exceder 1000 caracteres").optional(),honorario_moneda:f.k5(["UF","CLP","USD"]).default("UF"),modalidad_cobro:f.k5(["prepago","postpago","mixto"]).default("prepago"),honorario_notas:f.Yj().max(2e3,"Las notas no pueden exceder 2000 caracteres").optional(),tarifa_referencia:f.Yj().max(200,"El identificador de tarifa no puede exceder 200 caracteres").optional(),observaciones:f.Yj().optional(),descripcion_inicial:f.Yj().min(20,"Describe el contexto del caso con al menos 20 caracteres").max(2e3,"La descripci\xf3n inicial no puede exceder 2000 caracteres"),objetivo_cliente:f.Yj().max(1e3,"El objetivo del cliente no puede exceder 1000 caracteres").optional(),documentacion_recibida:f.Yj().max(2e3,"El listado de documentaci\xf3n no puede exceder 2000 caracteres").optional(),validado_at:f.Yj().optional().nullable(),marcar_validado:f.zM().optional()});function y(e,a){e.marcar_validado&&(e.abogado_responsable||a.addIssue({code:j.eq.custom,message:"Debes asignar un abogado responsable para validar el caso",path:["abogado_responsable"]}),e.cliente_principal_id||a.addIssue({code:j.eq.custom,message:"Debes vincular al menos un cliente principal para validar el caso",path:["cliente_principal_id"]}))}let w=N.superRefine((e,a)=>{y(e,a),"number"==typeof e.honorario_total_uf&&"number"==typeof e.honorario_pagado_uf&&e.honorario_pagado_uf>e.honorario_total_uf&&a.addIssue({code:j.eq.custom,message:"El monto pagado no puede superar el honorario total.",path:["honorario_pagado_uf"]})});N.partial().superRefine((e,a)=>{var r;y(e,a),void 0!==e.honorario_total_uf&&void 0!==e.honorario_pagado_uf&&e.honorario_pagado_uf>(null!=(r=e.honorario_total_uf)?r:0)&&a.addIssue({code:j.eq.custom,message:"El monto pagado no puede superar el honorario total.",path:["honorario_pagado_uf"]})}),f.Ik({brief:f.Yj().min(10,"El brief debe tener al menos 10 caracteres").max(2e3,"El brief no puede exceder 2000 caracteres"),overrides:N.partial().optional()}),f.Ik({case_id:f.Yj().uuid("ID de caso inv\xe1lido"),abogado_id:f.Yj().uuid("ID de abogado inv\xe1lido")}),f.Ik({estado:f.k5(["activo","suspendido","archivado","terminado"]).optional(),prioridad:f.k5(["baja","media","alta","urgente"]).optional(),abogado_responsable:f.Yj().uuid().optional(),materia:f.Yj().optional(),fecha_inicio_desde:f.Yj().optional(),fecha_inicio_hasta:f.Yj().optional(),search:f.Yj().optional(),page:f.ai().min(1).default(1),limit:f.ai().min(1).max(100).default(10)}),f.Ik({abogado_id:f.Yj().uuid().optional(),fecha_desde:f.Yj().optional(),fecha_hasta:f.Yj().optional()});let C=[{value:"activo",label:"Activo"},{value:"suspendido",label:"Suspendido"},{value:"archivado",label:"Archivado"},{value:"terminado",label:"Terminado"}],F=[{value:"baja",label:"Baja"},{value:"media",label:"Media"},{value:"alta",label:"Alta"},{value:"urgente",label:"Urgente"}],S=[{value:"preparacion",label:"Preparaci\xf3n"},{value:"en_revision",label:"Revisi\xf3n interna"},{value:"activo",label:"Activo"},{value:"cerrado",label:"Cerrado"}],D=["Laboral","Civil","Comercial","Penal","Familia","Tributario","Administrativo","Constitucional","Ambiental","Propiedad Intelectual"],E=["Arica y Parinacota","Tarapac\xe1","Antofagasta","Atacama","Coquimbo","Valpara\xedso","Metropolitana","O'Higgins","Maule","\xd1uble","Biob\xedo","La Araucan\xeda","Los R\xedos","Los Lagos","Ays\xe9n","Magallanes"],A=f.Ik({nombre:f.Yj().min(2,"El nombre es requerido").max(200,"El nombre no puede exceder 200 caracteres"),email:f.Yj().min(1,"El correo es requerido").email("Correo inv\xe1lido").max(255,"El correo no puede exceder 255 caracteres"),rut:_,telefono:f.Yj().max(50,"El tel\xe9fono no puede exceder 50 caracteres").optional()});var T=r(93293),I=r(23403),k=r(37074),M=r(38417),J=r(34721),R=r(94724),Y=r(14314);function U(e){var a,r,h,f,j,_,N,y,U,L,O;let{case:P,onCancel:B,lawyers:z,clients:q,currentProfile:$}=e,[V,H]=(0,o.useState)(!1),K=(0,o.useRef)(null),[X,G]=(0,o.useState)([]),[Z,Q]=(0,o.useState)(q),[W,ee]=(0,o.useState)(!1),[ea,er]=(0,o.useState)(!1),ei=(0,s.useRouter)(),{toast:eo}=(0,u.dj)(),es="abogado"===$.role?$.id:void 0,et=P?P.abogado_responsable_id||("string"==typeof P.abogado_responsable?P.abogado_responsable:null==(a=P.abogado_responsable)?void 0:a.id):void 0,el=P?{numero_causa:P.numero_causa||"",caratulado:P.caratulado,materia:P.materia||"",tribunal:P.tribunal||"",region:P.region||"",comuna:P.comuna||"",rut_cliente:P.rut_cliente||"",nombre_cliente:P.nombre_cliente,contraparte:P.contraparte||"",etapa_actual:P.etapa_actual||"Ingreso Demanda",estado:P.estado||"activo",fecha_inicio:P.fecha_inicio||new Date().toISOString().split("T")[0],abogado_responsable:et||es,cliente_principal_id:P.cliente_principal_id||void 0,prioridad:P.prioridad||"media",valor_estimado:P.valor_estimado||void 0,honorario_total_uf:null!=(h=P.honorario_total_uf)?h:void 0,honorario_pagado_uf:null!=(f=P.honorario_pagado_uf)?f:void 0,honorario_variable_porcentaje:null!=(j=P.honorario_variable_porcentaje)?j:void 0,honorario_variable_base:null!=(_=P.honorario_variable_base)?_:"",honorario_moneda:null!=(N=P.honorario_moneda)?N:"UF",modalidad_cobro:null!=(y=P.modalidad_cobro)?y:"prepago",honorario_notas:null!=(U=P.honorario_notas)?U:"",tarifa_referencia:null!=(L=P.tarifa_referencia)?L:"",observaciones:P.observaciones||"",descripcion_inicial:P.descripcion_inicial||"",objetivo_cliente:P.objetivo_cliente||"",documentacion_recibida:P.documentacion_recibida||"",workflow_state:P.workflow_state||"preparacion",validado_at:P.validado_at||void 0,marcar_validado:!!P.validado_at}:{numero_causa:"",caratulado:"",materia:"",tribunal:"",region:"",comuna:"",rut_cliente:"",nombre_cliente:"",contraparte:"",etapa_actual:"Ingreso Demanda",estado:"activo",fecha_inicio:new Date().toISOString().split("T")[0],abogado_responsable:es,cliente_principal_id:void 0,prioridad:"media",valor_estimado:void 0,honorario_total_uf:void 0,honorario_pagado_uf:0,honorario_variable_porcentaje:void 0,honorario_variable_base:"",honorario_moneda:"UF",modalidad_cobro:"prepago",honorario_notas:"",tarifa_referencia:"",observaciones:"",descripcion_inicial:"",objetivo_cliente:"",documentacion_recibida:"",workflow_state:"preparacion",marcar_validado:!1},{register:en,control:ed,handleSubmit:ec,formState:{errors:em},setValue:ep,watch:eu}=(0,t.mN)({resolver:(0,l.u)(w),defaultValues:el}),{register:eh,handleSubmit:ex,reset:eb,formState:{errors:eg},setValue:ev,watch:ef}=(0,t.mN)({resolver:(0,l.u)(A),defaultValues:{nombre:"",email:"",rut:"",telefono:""}}),ej=eu("rut_cliente"),e_=eu("marcar_validado"),eN=eu("workflow_state");eu("modalidad_cobro");let ey=eu("honorario_moneda"),ew=eu("honorario_total_uf"),eC=eu("honorario_pagado_uf"),eF="number"!=typeof ew||Number.isNaN(ew)?void 0:Math.max((null!=ew?ew:0)-(null!=eC?eC:0),0),eS=ef("rut"),{ref:eD,...eE}=eh("rut");(0,o.useEffect)(()=>{P||ep("workflow_state",e_?"en_revision":"preparacion")},[e_,P,ep]),(0,o.useEffect)(()=>{Q(q)},[q]);let eA=()=>{G([]),K.current&&(K.current.value="")},eT=async e=>{H(!0);try{var a,r,i;let o,s=!!e.marcar_validado,t=new Date().toISOString(),l={...e,validado_at:s?null!=(r=null!=(a=e.validado_at)?a:null==P?void 0:P.validado_at)?r:t:null,workflow_state:P?e.workflow_state:s?"en_revision":"preparacion"};if((o=P?await x(P.id,l):await b(l)).success){eo({title:P?"Caso actualizado":"Caso creado",description:P?"El caso ha sido actualizado exitosamente":"El nuevo caso ha sido creado exitosamente"});let e=null==(i=o.case)?void 0:i.id;if(!P&&X.length>0){if(e){let a=0,r=[];for(let i of X){let o=new FormData;o.append("case_id",e),o.append("file",i),o.append("nombre",i.name),o.append("visibilidad","privado");let s=await (0,g.X)(o);s.success?a+=1:r.push({fileName:i.name,...s.error?{message:s.error}:{}})}r.length>0?eo({title:"Algunos documentos no se cargaron",description:r.map(e=>{var a;return"".concat(e.fileName,": ").concat(null!=(a=e.message)?a:"Error desconocido")}).join(", "),variant:"destructive"}):a>0&&eo({title:"Documentos cargados",description:"Se cargaron ".concat(a," documento").concat(a>1?"s":""," correctamente.")})}else eo({title:"Documentos no cargados",description:"No se pudo obtener el ID del caso reci\xe9n creado para adjuntar los documentos.",variant:"destructive"});eA()}ei.push(e?"/cases/".concat(e):"/cases")}else eo({title:"Error",description:o.error||"Ocurri\xf3 un error inesperado",variant:"destructive"})}catch(e){console.error("Error submitting form:",e),eo({title:"Error",description:"Ocurri\xf3 un error inesperado",variant:"destructive"})}finally{H(!1)}},eI=ex(async e=>{er(!0);try{let a=await v(e);if(a.success){let e={id:a.client.id,nombre:a.client.nombre,role:"cliente",rut:a.client.rut,telefono:a.client.telefono,email:a.client.email};Q(a=>a.some(a=>a.id===e.id)?a.map(a=>a.id===e.id?e:a):[...a,e].sort((e,a)=>e.nombre.localeCompare(a.nombre,"es"))),ep("cliente_principal_id",e.id),ep("nombre_cliente",e.nombre),e.rut&&ep("rut_cliente",e.rut),eo({title:"Cliente creado",description:"".concat(e.nombre," fue a\xf1adido al directorio y seleccionado en el caso.")}),eb(),ee(!1)}else eo({title:"No se pudo crear el cliente",description:a.error||"Revisa los datos e int\xe9ntalo nuevamente.",variant:"destructive"})}catch(e){console.error("Error creating client from CaseForm:",e),eo({title:"Error inesperado",description:"Ocurri\xf3 un error al crear el cliente.",variant:"destructive"})}finally{er(!1)}});return(0,i.jsxs)(m.Zp,{className:"w-full max-w-4xl mx-auto",children:[(0,i.jsx)(m.aR,{children:(0,i.jsx)(m.ZB,{children:P?"Editar Caso":"Nuevo Caso"})}),(0,i.jsx)(m.Wu,{children:(0,i.jsxs)("form",{onSubmit:ec(eT),className:"space-y-8",children:[(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Datos del caso"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Completa la informaci\xf3n general del expediente."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"numero_causa",children:"N\xfamero de Causa"}),(0,i.jsx)(d.p,{id:"numero_causa",placeholder:"C-1234-2024",...en("numero_causa"),disabled:V}),em.numero_causa&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.numero_causa.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"materia",children:"Materia *"}),(0,i.jsxs)("select",{id:"materia",className:"form-input",...en("materia"),disabled:V,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar materia"}),D.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),em.materia&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.materia.message})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"caratulado",children:"Caratulado *"}),(0,i.jsx)(d.p,{id:"caratulado",placeholder:"P\xe9rez con Empresa ABC",...en("caratulado"),disabled:V}),em.caratulado&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.caratulado.message})]})]}),(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Cliente y contraparte"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Identifica a las partes involucradas."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"nombre_cliente",children:"Nombre del Cliente *"}),(0,i.jsx)(d.p,{id:"nombre_cliente",placeholder:"Juan P\xe9rez",...en("nombre_cliente"),disabled:V}),em.nombre_cliente&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.nombre_cliente.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"rut_cliente",children:"RUT del Cliente"}),(0,i.jsx)(d.p,{id:"rut_cliente",placeholder:"12.345.678-9",value:ej||"",onChange:e=>{ep("rut_cliente",(0,T.nr)(e.target.value))},disabled:V}),em.rut_cliente&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.rut_cliente.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,i.jsx)(c.J,{htmlFor:"cliente_principal_id",children:"Cliente principal *"}),(0,i.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>ee(e=>!e),disabled:V,children:W?"Cerrar":"Crear cliente"})]}),(0,i.jsx)(t.xI,{control:ed,name:"cliente_principal_id",render:e=>{let{field:a}=e;return(0,i.jsxs)("select",{id:"cliente_principal_id",className:"form-input",value:a.value||"",onChange:e=>a.onChange(e.target.value||void 0),disabled:V||0===Z.length,children:[(0,i.jsx)("option",{value:"",children:"Selecciona un cliente"}),Z.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id))]})}}),0===Z.length&&(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"No hay clientes registrados. Puedes vincularlo m\xe1s tarde."}),em.cliente_principal_id&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.cliente_principal_id.message}),W&&(0,i.jsxs)("form",{onSubmit:eI,className:"mt-4 space-y-3 rounded-md border border-gray-200 bg-gray-50 p-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"new_client_nombre",children:"Nombre del cliente"}),(0,i.jsx)(d.p,{id:"new_client_nombre",placeholder:"Juana P\xe9rez",...eh("nombre"),disabled:ea}),eg.nombre&&(0,i.jsx)("p",{className:"text-xs text-red-600",children:eg.nombre.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"new_client_email",children:"Correo"}),(0,i.jsx)(d.p,{id:"new_client_email",type:"email",placeholder:"cliente@correo.com",...eh("email"),disabled:ea}),eg.email&&(0,i.jsx)("p",{className:"text-xs text-red-600",children:eg.email.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"new_client_rut",children:"RUT"}),(0,i.jsx)(d.p,{id:"new_client_rut",placeholder:"12.345.678-9",name:eE.name,ref:eD,onBlur:eE.onBlur,value:eS||"",onChange:e=>{ev("rut",(0,T.nr)(e.target.value),{shouldDirty:!0,shouldValidate:!0})},disabled:ea}),eg.rut&&(0,i.jsx)("p",{className:"text-xs text-red-600",children:eg.rut.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"new_client_telefono",children:"Tel\xe9fono"}),(0,i.jsx)(d.p,{id:"new_client_telefono",placeholder:"+56 9 1234 5678",...eh("telefono"),disabled:ea}),eg.telefono&&(0,i.jsx)("p",{className:"text-xs text-red-600",children:eg.telefono.message})]})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,i.jsx)(n.$,{type:"button",variant:"ghost",onClick:()=>{eb(),ee(!1)},disabled:ea,children:"Cancelar"}),(0,i.jsx)(n.$,{type:"submit",disabled:ea,children:ea?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):"Guardar cliente"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"contraparte",children:"Contraparte"}),(0,i.jsx)(d.p,{id:"contraparte",placeholder:"Empresa ABC S.A.",...en("contraparte"),disabled:V}),em.contraparte&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.contraparte.message})]})]})]}),(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Detalle procesal"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Ingresa la informaci\xf3n requerida por Supabase para seguimiento."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"tribunal",children:"Tribunal"}),(0,i.jsx)(d.p,{id:"tribunal",placeholder:"1\xb0 Juzgado Civil de Santiago",...en("tribunal"),disabled:V}),em.tribunal&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.tribunal.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"region",children:"Regi\xf3n"}),(0,i.jsxs)("select",{id:"region",className:"form-input",...en("region"),disabled:V,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar regi\xf3n"}),E.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]}),em.region&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.region.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"comuna",children:"Comuna"}),(0,i.jsx)(d.p,{id:"comuna",placeholder:"Santiago",...en("comuna"),disabled:V}),em.comuna&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.comuna.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"fecha_inicio",children:"Fecha de Inicio"}),(0,i.jsx)(d.p,{id:"fecha_inicio",type:"date",...en("fecha_inicio"),disabled:V}),em.fecha_inicio&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.fecha_inicio.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"valor_estimado",children:"Valor Estimado (CLP)"}),(0,i.jsx)(d.p,{id:"valor_estimado",type:"number",placeholder:"5000000",...en("valor_estimado",{valueAsNumber:!0}),disabled:V}),em.valor_estimado&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.valor_estimado.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"estado",children:"Estado actual"}),(0,i.jsx)("select",{id:"estado",className:"form-input",...en("estado"),disabled:V,children:C.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))}),em.estado&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.estado.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"prioridad",children:"Prioridad"}),(0,i.jsx)("select",{id:"prioridad",className:"form-input",...en("prioridad"),disabled:V,children:F.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))}),em.prioridad&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.prioridad.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"etapa_actual",children:"Etapa actual"}),(0,i.jsx)(d.p,{id:"etapa_actual",placeholder:"Ingreso Demanda",...en("etapa_actual"),disabled:V}),em.etapa_actual&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.etapa_actual.message})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"observaciones",children:"Observaciones"}),(0,i.jsx)(p.T,{id:"observaciones",rows:4,placeholder:"Observaciones adicionales, riesgos o comentarios internos.",...en("observaciones"),disabled:V}),em.observaciones&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.observaciones.message})]})]}),(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Honorarios y cobro prepago"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Define c\xf3mo se cobrar\xe1 este caso. El timeline bloquear\xe1 etapas hasta registrar el pago correspondiente."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"modalidad_cobro",children:"Modalidad de cobro"}),(0,i.jsxs)("select",{id:"modalidad_cobro",className:"form-input",...en("modalidad_cobro"),disabled:V,children:[(0,i.jsx)("option",{value:"prepago",children:"Prepago por etapas"}),(0,i.jsx)("option",{value:"postpago",children:"Postpago"}),(0,i.jsx)("option",{value:"mixto",children:"Mixto"})]}),em.modalidad_cobro&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.modalidad_cobro.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"honorario_moneda",children:"Moneda base"}),(0,i.jsxs)("select",{id:"honorario_moneda",className:"form-input",...en("honorario_moneda"),disabled:V,children:[(0,i.jsx)("option",{value:"UF",children:"UF"}),(0,i.jsx)("option",{value:"CLP",children:"CLP"}),(0,i.jsx)("option",{value:"USD",children:"USD"})]}),em.honorario_moneda&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.honorario_moneda.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"tarifa_referencia",children:"Tarifa de referencia"}),(0,i.jsx)(d.p,{id:"tarifa_referencia",placeholder:"Ej: civil_juicio_ordinario_mayor_cuantia",...en("tarifa_referencia"),disabled:V}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Usa el identificador definido en la tabla de tarifas de Xel Chile para asociar el timeline autom\xe1ticamente."}),em.tarifa_referencia&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.tarifa_referencia.message})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"honorario_total_uf",children:"Honorario total (UF)"}),(0,i.jsx)(d.p,{id:"honorario_total_uf",type:"number",min:"0",step:"0.01",placeholder:"30",...en("honorario_total_uf",{valueAsNumber:!0}),disabled:V||"UF"!==ey}),"UF"!==ey&&(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Para otras monedas detalla el valor en notas."}),em.honorario_total_uf&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.honorario_total_uf.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"honorario_pagado_uf",children:"Monto pagado (UF)"}),(0,i.jsx)(d.p,{id:"honorario_pagado_uf",type:"number",min:"0",step:"0.01",placeholder:"0",...en("honorario_pagado_uf",{valueAsNumber:!0}),disabled:V||"UF"!==ey}),em.honorario_pagado_uf&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.honorario_pagado_uf.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{children:"Saldo pendiente (UF)"}),(0,i.jsx)("div",{className:"h-10 flex items-center rounded-md border border-dashed border-gray-300 px-3 text-sm font-medium text-gray-700 bg-gray-50",children:void 0!==eF?null==eF||Number.isNaN(eF)?"—":"".concat(new Intl.NumberFormat("es-CL",{minimumFractionDigits:2,maximumFractionDigits:2}).format(eF)," UF"):"—"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"honorario_variable_porcentaje",children:"Componente variable (%)"}),(0,i.jsx)(d.p,{id:"honorario_variable_porcentaje",type:"number",min:"0",max:"100",step:"0.1",placeholder:"10",...en("honorario_variable_porcentaje",{valueAsNumber:!0}),disabled:V}),em.honorario_variable_porcentaje&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.honorario_variable_porcentaje.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"honorario_variable_base",children:"Base del variable"}),(0,i.jsx)(p.T,{id:"honorario_variable_base",rows:2,placeholder:"Ej: 10% de lo obtenido o de lo ahorrado por la defensa.",...en("honorario_variable_base"),disabled:V}),em.honorario_variable_base&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.honorario_variable_base.message})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"honorario_notas",children:"Notas de honorarios"}),(0,i.jsx)(p.T,{id:"honorario_notas",rows:3,placeholder:"Detalle acuerdos espec\xedficos, descuentos, o condiciones especiales.",...en("honorario_notas"),disabled:V}),em.honorario_notas&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.honorario_notas.message})]}),(0,i.jsxs)("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 text-sm text-blue-900",children:[(0,i.jsx)("p",{className:"font-medium",children:"Prepago por etapas"}),(0,i.jsx)("p",{className:"mt-1",children:"El cliente podr\xe1 avanzar pagando etapa por etapa. Cada fase del timeline exigir\xe1 un pago registrado para habilitar las acciones del equipo jur\xeddico. Puedes copiar y compartir los enlaces de Payku desde el detalle del caso."})]})]}),(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Informaci\xf3n inicial"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Describe el contexto y los objetivos del cliente para una correcta asignaci\xf3n."})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"descripcion_inicial",children:"Descripci\xf3n inicial *"}),(0,i.jsx)(p.T,{id:"descripcion_inicial",rows:5,placeholder:"Resumen del caso, antecedentes relevantes y hechos principales.",...en("descripcion_inicial"),disabled:V}),em.descripcion_inicial&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.descripcion_inicial.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"objetivo_cliente",children:"Objetivo del cliente"}),(0,i.jsx)(p.T,{id:"objetivo_cliente",rows:4,placeholder:"\xbfQu\xe9 espera lograr el cliente con este procedimiento?",...en("objetivo_cliente"),disabled:V}),em.objetivo_cliente&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.objetivo_cliente.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"documentacion_recibida",children:"Documentaci\xf3n recibida"}),(0,i.jsx)(p.T,{id:"documentacion_recibida",rows:4,placeholder:"Detalle la documentaci\xf3n entregada por el cliente (contratos, boletas, respaldos, etc.).",...en("documentacion_recibida"),disabled:V}),em.documentacion_recibida&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.documentacion_recibida.message})]})]}),!P&&(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Documentos de respaldo"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Adjunta antecedentes relevantes para el equipo. Tama\xf1o m\xe1ximo de 20 MB por archivo."})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"case_documents",children:"Archivos"}),(0,i.jsxs)("div",{className:"space-y-3 rounded-md border border-dashed border-muted-foreground/40 p-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,i.jsx)(k.A,{className:"h-4 w-4 text-gray-500"}),(0,i.jsx)("span",{children:"Selecciona uno o m\xe1s archivos de hasta 20 MB cada uno."})]}),X.length>0&&(0,i.jsxs)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:eA,disabled:V,children:[(0,i.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Limpiar selecci\xf3n"]})]}),(0,i.jsx)(d.p,{id:"case_documents",type:"file",multiple:!0,onChange:e=>{var a;let r=Array.from(null!=(a=e.target.files)?a:[]);if(0===r.length)return;let i=r.filter(e=>e.size>0x1400000);i.length>0&&eo({title:"Archivo demasiado grande",description:"Los siguientes archivos superan el l\xedmite de 20 MB: ".concat(i.map(e=>e.name).join(", ")),variant:"destructive"});let o=r.filter(e=>e.size<=0x1400000);o.length>0&&G(e=>{let a=new Set(e.map(e=>"".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified))),r=o.filter(e=>{let r="".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified);return!a.has(r)&&(a.add(r),!0)});return 0===r.length?e:[...e,...r]}),e.target.value=""},disabled:V,ref:K}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Se aceptan archivos PDF, Word, im\xe1genes y texto. M\xe1ximo 20 MB por archivo."})]})]}),X.length>0&&(0,i.jsx)("ul",{className:"space-y-2",children:X.map((e,a)=>{var r;return(0,i.jsxs)("li",{className:"flex items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(J.A,{className:"h-4 w-4 text-gray-500"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:(r=e.size)>=1048576?"".concat((r/1048576).toFixed(1)," MB"):r>=1024?"".concat((r/1024).toFixed(1)," KB"):"".concat(r," B")})]})]}),(0,i.jsx)(n.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>{G(e=>e.filter((e,r)=>r!==a)),K.current&&(K.current.value="")},disabled:V,"aria-label":"Quitar ".concat(e.name),children:(0,i.jsx)(R.A,{className:"h-4 w-4 text-gray-500"})})]},"".concat(e.name,"-").concat(e.lastModified,"-").concat(a))})})]})]}),(0,i.jsxs)("section",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Asignaci\xf3n y workflow"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Define qui\xe9n liderar\xe1 el caso y el estado interno del expediente."})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"abogado_responsable",children:"Abogado responsable"}),(0,i.jsx)(t.xI,{control:ed,name:"abogado_responsable",render:e=>{let{field:a}=e;return(0,i.jsxs)("select",{id:"abogado_responsable",className:"form-input",value:a.value||"",onChange:e=>a.onChange(e.target.value||void 0),disabled:V||0===z.length,children:[(0,i.jsx)("option",{value:"",children:"Selecciona un abogado"}),z.map(e=>(0,i.jsx)("option",{value:e.id,children:e.nombre},e.id))]})}}),0===z.length&&(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"No hay abogados disponibles. Un administrador debe registrarlos."}),em.abogado_responsable&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.abogado_responsable.message})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(c.J,{htmlFor:"workflow_state",children:"Estado interno"}),(0,i.jsx)("select",{id:"workflow_state",className:"form-input",...en("workflow_state"),disabled:V,children:S.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))}),em.workflow_state&&(0,i.jsx)("p",{className:"text-sm text-red-600",children:em.workflow_state.message})]})]}),(0,i.jsxs)("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-4",children:[(0,i.jsxs)("label",{className:"flex items-start space-x-3",children:[(0,i.jsx)("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...en("marcar_validado"),disabled:V}),(0,i.jsxs)("span",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-900",children:"Marcar caso como validado y listo para asignaci\xf3n"}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Al validar el caso se notificar\xe1 al abogado responsable y al cliente principal, y se activar\xe1 el timeline autom\xe1tico."})]})]}),em.marcar_validado&&(0,i.jsx)("p",{className:"text-sm text-red-600 mt-2",children:em.marcar_validado.message}),e_&&(0,i.jsxs)("div",{className:"mt-3 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded-md p-3",children:["Revisa que la informaci\xf3n est\xe9 completa. El workflow pasar\xe1 a ",(0,i.jsxs)("strong",{children:['"',null!=(O=null==(r=S.find(e=>e.value===eN))?void 0:r.label)?O:"Revisi\xf3n interna",'"']})," y el equipo recibir\xe1 un resumen del caso junto al timeline sugerido."]})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-4",children:[B&&(0,i.jsxs)(n.$,{type:"button",variant:"outline",onClick:B,disabled:V,children:[(0,i.jsx)(M.A,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),(0,i.jsx)(n.$,{type:"submit",disabled:V,children:V?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.A,{className:"w-4 h-4 mr-2 animate-spin"}),P?"Actualizando...":"Creando..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.A,{className:"w-4 h-4 mr-2"}),P?"Actualizar Caso":"Crear Caso"]})})]})]})})]})}},40918:(e,a,r)=>{"use strict";r.d(a,{p:()=>t});var i=r(11291),o=r(97451),s=r(93293);let t=o.forwardRef((e,a)=>{let{className:r,type:o,...t}=e;return(0,i.jsx)("input",{type:o,className:(0,s.cn)("flex h-11 w-full rounded-2xl border border-white/30 bg-white/70 px-4 text-sm text-foreground/80 shadow-inner ring-offset-transparent transition-all placeholder:text-foreground/40 focus-visible:border-primary focus-visible:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60",r),ref:a,...t})});t.displayName="Input"},41782:(e,a,r)=>{"use strict";r.d(a,{X:()=>o});var i=r(59030);let o=(0,i.createServerReference)("4075c1ceb223881a0e7965a110fc966b45d5dff05e",i.callServer,void 0,i.findSourceMapURL,"uploadDocument")},57965:(e,a,r)=>{Promise.resolve().then(r.bind(r,4546))},68630:(e,a,r)=>{"use strict";r.d(a,{dj:()=>m});var i=r(97451);let o=0,s=new Map,t=e=>{if(s.has(e))return;let a=setTimeout(()=>{s.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,a)},l=[],n={toasts:[]};function d(e){n=((e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=a;return r?t(r):e.toasts.forEach(e=>{t(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}})(n,e),l.forEach(e=>{e(n)})}function c(e){let{...a}=e,r=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...a,id:r,open:!0,onOpenChange:e=>{e||i()}}}),{id:r,dismiss:i,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,a]=i.useState(n);return i.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d(e?{type:"DISMISS_TOAST",toastId:e}:{type:"DISMISS_TOAST"})}}},73244:(e,a,r)=>{"use strict";r.d(a,{J:()=>d});var i=r(11291),o=r(97451),s=r(23838),t=r(11263),l=r(93293);let n=(0,t.F)("text-sm font-medium leading-none text-foreground/75 peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)(s.b,{ref:a,className:(0,l.cn)(n(),r),...o})});d.displayName=s.b.displayName},82596:(e,a,r)=>{"use strict";r.d(a,{Wu:()=>d,ZB:()=>n,Zp:()=>t,aR:()=>l});var i=r(11291),o=r(97451),s=r(93293);let t=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)("div",{ref:a,className:(0,s.cn)("rounded-3xl border border-white/20 bg-white/70 text-card-foreground shadow-xl backdrop-blur-xl transition-colors",r),...o})});t.displayName="Card";let l=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 px-6 py-5",r),...o})});l.displayName="CardHeader";let n=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)("h3",{ref:a,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...o})});n.displayName="CardTitle",o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",r),...o})}).displayName="CardDescription";let d=o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)("div",{ref:a,className:(0,s.cn)("px-6 pb-6 pt-0 text-sm text-foreground/80",r),...o})});d.displayName="CardContent",o.forwardRef((e,a)=>{let{className:r,...o}=e;return(0,i.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",r),...o})}).displayName="CardFooter"},90718:(e,a,r)=>{"use strict";r.d(a,{$:()=>d});var i=r(11291),o=r(97451),s=r(26809),t=r(11263),l=r(93293);let n=(0,t.F)("inline-flex items-center justify-center whitespace-nowrap rounded-2xl text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-transparent",{variants:{variant:{default:"border border-white/30 bg-white/70 text-foreground shadow-sm backdrop-blur-xl hover:bg-white/90 focus-visible:ring-primary/40 focus-visible:ring-offset-transparent",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/90 focus-visible:ring-destructive/40 focus-visible:ring-offset-transparent",outline:"border border-white/30 bg-transparent text-foreground/80 hover:bg-white/10 focus-visible:ring-primary/30 focus-visible:ring-offset-transparent",secondary:"border border-transparent bg-primary text-primary-foreground shadow-lg hover:bg-primary/90 focus-visible:ring-primary/40 focus-visible:ring-offset-transparent",ghost:"border border-transparent bg-transparent text-foreground/70 hover:bg-white/10",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80"},size:{default:"h-10 px-5",sm:"h-9 rounded-xl px-3.5",lg:"h-12 rounded-2xl px-8 text-base",icon:"h-10 w-10 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),d=o.forwardRef((e,a)=>{let{className:r,variant:o,size:t,asChild:d=!1,...c}=e,m=d?s.DX:"button";return(0,i.jsx)(m,{className:(0,l.cn)(n({variant:o,size:t,className:r})),ref:a,...c})});d.displayName="Button"},93293:(e,a,r)=>{"use strict";r.d(a,{IM:()=>h,Yq:()=>d,cn:()=>l,fw:()=>p,kz:()=>c,m7:()=>x,nr:()=>u,qA:()=>g,r6:()=>m,v7:()=>b,vv:()=>n});var i=r(41111),o=r(98358);function s(e){return null!=e?e:""}function t(e){if(!e)return new Date("Invalid Date");let a="string"==typeof e?new Date(e):e;return isNaN(a.getTime())?new Date("Invalid Date"):a}function l(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,o.QP)((0,i.$)(a))}function n(e){return new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(e)}function d(e){let a=t(null!=e?e:null);return isNaN(a.getTime())?"":new Intl.DateTimeFormat("es-CL",{year:"numeric",month:"long",day:"numeric"}).format(a)}function c(e){let a=t(null!=e?e:null);return isNaN(a.getTime())?"":new Intl.DateTimeFormat("es-CL",{year:"numeric",month:"2-digit",day:"2-digit"}).format(a)}function m(e){let a=t(null!=e?e:null);return isNaN(a.getTime())?"":new Intl.DateTimeFormat("es-CL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(a)}function p(e){let a=t(null!=e?e:null);if(isNaN(a.getTime()))return"Fecha inv\xe1lida";let r=(Date.now()-a.getTime())/1e3;return r<60?"hace unos segundos":r<3600?"hace ".concat(Math.floor(r/60)," minutos"):r<86400?"hace ".concat(Math.floor(r/3600)," horas"):r<2592e3?"hace ".concat(Math.floor(r/86400)," d\xedas"):r<31104e3?"hace ".concat(Math.floor(r/2592e3)," meses"):"hace ".concat(Math.floor(r/31104e3)," a\xf1os")}function u(e){let a=s(e).replace(/[^0-9kK]/g,"");if(a.length<8)return a;let r=a.slice(0,-1),i=a.slice(-1),o=r.replace(/\B(?=(\d{3})+(?!\d))/g,".");return"".concat(o,"-").concat(i)}function h(e){let a=s(e).trim();return a?a.split(/\s+/).map(e=>e[0]).join("").toUpperCase().slice(0,2):""}function x(e){let a=t(null!=e?e:null);if(isNaN(a.getTime()))return!1;let r=new Date;r.setHours(0,0,0,0);let i=new Date(a);return i.setHours(0,0,0,0),i<r}function b(e){let a="number"!=typeof e||isNaN(e)?0:e;if(a<=0)return"0 Bytes";let r=["Bytes","KB","MB","GB"],i=Math.min(Math.floor(Math.log(a)/Math.log(1024)),r.length-1),o=(a/Math.pow(1024,i)).toFixed(2);return"".concat(o," ").concat(r[i])}function g(e){let a=s(e),r=0;for(let e=0;e<a.length;e++)r=a.charCodeAt(e)+((r<<5)-r);let i=(r%360+360)%360;return"hsl(".concat(i,", 70%, 50%)")}}},e=>{e.O(0,[936,577,625,193,55,358],()=>e(e.s=57965)),_N_E=e.O()}]);