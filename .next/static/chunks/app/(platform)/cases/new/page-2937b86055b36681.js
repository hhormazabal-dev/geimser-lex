(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{28009:(e,a,i)=>{"use strict";i.d(a,{CaseForm:()=>P});var r=i(11291),s=i(97451),o=i(95876),l=i(55167),t=i(32951),n=i(90718),c=i(40918),d=i(73244),m=i(82596),p=i(848),u=i(68630),x=i(59030);let h=(0,x.createServerReference)("601dc316dca099ac5c6111fb7c78b63a6a2296a56b",x.callServer,void 0,x.findSourceMapURL,"updateCase"),_=(0,x.createServerReference)("402238d93ed96f80b46537a5e0b468a17e405e77e2",x.callServer,void 0,x.findSourceMapURL,"createCase");var b=i(41782),g=i(28598),j=i(66383),v=i(1931);let f=j.Yj().optional().refine(function(e){if("string"!=typeof e||0===e.trim().length)return!0;let a=e.replace(/[^0-9kK]/g,"");if(a.length<8||a.length>9)return!1;let i=a.slice(0,-1),r=a.slice(-1).toUpperCase(),s=0,o=2;for(let e=i.length-1;e>=0;e--)s+=parseInt(i[e],10)*o,o=7===o?2:o+1;let l=11-s%11;return r===(11===l?"0":10===l?"K":String(l))},{message:"RUT inv\xe1lido"}),N=j.Ik({numero_causa:j.Yj().optional(),caratulado:j.Yj().min(1,"El caratulado es requerido").max(500,"El caratulado no puede exceder 500 caracteres"),materia:j.Yj().min(1,"La materia es requerida").max(1e3,"La materia no puede exceder 1000 caracteres"),tribunal:j.Yj().optional(),region:j.Yj().optional(),comuna:j.Yj().optional(),rut_cliente:f,nombre_cliente:j.Yj().min(1,"El nombre del cliente es requerido").max(1e3,"El nombre no puede exceder 1000 caracteres"),contraparte:j.Yj().optional(),etapa_actual:j.Yj().default("Ingreso Demanda"),estado:j.k5(["activo","suspendido","archivado","terminado"]).default("activo"),fecha_inicio:j.Yj().optional(),abogado_responsable:j.Yj().uuid("ID de abogado inv\xe1lido").optional(),analista_id:j.Yj().uuid("ID de analista inv\xe1lido").optional(),cliente_principal_id:j.Yj().uuid("ID de cliente inv\xe1lido"),workflow_state:j.k5(["preparacion","en_revision","activo","cerrado"]).default("preparacion"),prioridad:j.k5(["baja","media","alta","urgente"]).default("media"),valor_estimado:j.ai().positive("El valor debe ser positivo").optional(),honorario_total_uf:j.ai().nonnegative("El honorario total debe ser positivo").optional(),honorario_pagado_uf:j.ai().nonnegative("El monto pagado debe ser positivo").optional(),honorario_variable_porcentaje:j.ai().min(0,"El porcentaje variable debe ser positivo").max(100,"El porcentaje variable no puede superar 100%").optional(),honorario_variable_base:j.Yj().max(1e3,"La base variable no puede exceder 1000 caracteres").optional(),honorario_moneda:j.k5(["UF","CLP","USD"]).default("UF"),modalidad_cobro:j.k5(["prepago","postpago","mixto"]).default("prepago"),honorario_notas:j.Yj().max(2e3,"Las notas no pueden exceder 2000 caracteres").optional(),tarifa_referencia:j.Yj().max(1e3,"El identificador de tarifa no puede exceder 1000 caracteres").optional(),audiencia_inicial_tipo:j.k5(["preparatoria","juicio"]).optional(),audiencia_inicial_requiere_testigos:j.zM().optional(),alcance_cliente_solicitado:j.ai().int("El alcance solicitado debe ser un n\xfamero entero").min(0,"El alcance solicitado no puede ser negativo").max(100,"El alcance solicitado no puede exceder 100 etapas").optional(),alcance_cliente_autorizado:j.ai().int("El alcance autorizado debe ser un n\xfamero entero").min(0,"El alcance autorizado no puede ser negativo").max(100,"El alcance autorizado no puede exceder 100 etapas").optional(),observaciones:j.Yj().optional(),descripcion_inicial:j.Yj().min(20,"Describe el contexto del caso con al menos 20 caracteres").max(2e3,"La descripci\xf3n inicial no puede exceder 2000 caracteres"),objetivo_cliente:j.Yj().max(1e3,"El objetivo del cliente no puede exceder 1000 caracteres").optional(),documentacion_recibida:j.Yj().max(2e3,"El listado de documentaci\xf3n no puede exceder 2000 caracteres").optional(),validado_at:j.Yj().optional().nullable(),marcar_validado:j.zM().optional()});function y(e,a){e.marcar_validado&&(e.abogado_responsable||a.addIssue({code:v.eq.custom,message:"Debes asignar un abogado responsable para validar el caso",path:["abogado_responsable"]}),e.cliente_principal_id||a.addIssue({code:v.eq.custom,message:"Debes vincular al menos un cliente principal para validar el caso",path:["cliente_principal_id"]}))}let w=N.superRefine((e,a)=>{y(e,a),e.cliente_principal_id||a.addIssue({code:v.eq.custom,message:"Selecciona un cliente principal antes de crear el caso.",path:["cliente_principal_id"]}),"number"==typeof e.honorario_total_uf&&"number"==typeof e.honorario_pagado_uf&&e.honorario_pagado_uf>e.honorario_total_uf&&a.addIssue({code:v.eq.custom,message:"El monto pagado no puede superar el honorario total.",path:["honorario_pagado_uf"]}),void 0!==e.alcance_cliente_autorizado&&void 0!==e.alcance_cliente_solicitado&&e.alcance_cliente_autorizado>e.alcance_cliente_solicitado&&a.addIssue({code:v.eq.custom,message:"El alcance autorizado no puede superar al alcance solicitado por el cliente.",path:["alcance_cliente_autorizado"]})});N.partial().superRefine((e,a)=>{var i,r;y(e,a),void 0!==e.honorario_total_uf&&void 0!==e.honorario_pagado_uf&&e.honorario_pagado_uf>(null!=(i=e.honorario_total_uf)?i:0)&&a.addIssue({code:v.eq.custom,message:"El monto pagado no puede superar el honorario total.",path:["honorario_pagado_uf"]}),void 0!==e.alcance_cliente_autorizado&&void 0!==e.alcance_cliente_solicitado&&e.alcance_cliente_autorizado>(null!=(r=e.alcance_cliente_solicitado)?r:0)&&a.addIssue({code:v.eq.custom,message:"El alcance autorizado no puede superar al alcance solicitado por el cliente.",path:["alcance_cliente_autorizado"]})}),j.Ik({brief:j.Yj().min(10,"El brief debe tener al menos 10 caracteres").max(2e3,"El brief no puede exceder 2000 caracteres"),overrides:N.partial().optional()}),j.Ik({case_id:j.Yj().uuid("ID de caso inv\xe1lido"),abogado_id:j.Yj().uuid("ID de abogado inv\xe1lido")}),j.Ik({estado:j.k5(["activo","suspendido","archivado","terminado"]).optional(),prioridad:j.k5(["baja","media","alta","urgente"]).optional(),abogado_responsable:j.Yj().uuid().optional(),materia:j.Yj().optional(),fecha_inicio_desde:j.Yj().optional(),fecha_inicio_hasta:j.Yj().optional(),search:j.Yj().optional(),page:j.ai().min(1).default(1),limit:j.ai().min(1).max(100).default(10)}),j.Ik({abogado_id:j.Yj().uuid().optional(),fecha_desde:j.Yj().optional(),fecha_hasta:j.Yj().optional()});let C=[{value:"activo",label:"Activo"},{value:"suspendido",label:"Suspendido"},{value:"archivado",label:"Archivado"},{value:"terminado",label:"Terminado"}],F=[{value:"baja",label:"Baja"},{value:"media",label:"Media"},{value:"alta",label:"Alta"},{value:"urgente",label:"Urgente"}],E=[{value:"preparacion",label:"Preparaci\xf3n"},{value:"en_revision",label:"Revisi\xf3n interna"},{value:"activo",label:"Activo"},{value:"cerrado",label:"Cerrado"}],k=["Laboral","Civil","Comercial","Penal","Familia","Tributario","Administrativo","Constitucional","Ambiental","Propiedad Intelectual"],S=["Arica y Parinacota","Tarapac\xe1","Antofagasta","Atacama","Coquimbo","Valpara\xedso","Metropolitana","O'Higgins","Maule","\xd1uble","Biob\xedo","La Araucan\xeda","Los R\xedos","Los Lagos","Ays\xe9n","Magallanes"];var J=i(59823);let D=j.Ik({nombre:j.Yj().min(2,"El nombre es requerido").max(1e3,"El nombre no puede exceder 1000 caracteres"),email:j.Yj().min(1,"El correo es requerido").email("Correo inv\xe1lido").max(255,"El correo no puede exceder 255 caracteres"),rut:f,telefono:j.Yj().max(50,"El tel\xe9fono no puede exceder 50 caracteres").optional()});var A=i(93293),I=i(23403),Y=i(37074),z=i(38417),q=i(34721),U=i(94724),M=i(14314);function P(e){var a,i,x,j,v,f,N,y,P,R,L,B;let{case:T,onCancel:O,lawyers:$,clients:V,currentProfile:H}=e,[K,G]=(0,s.useState)(!1),Q=(0,s.useRef)(null),[W,X]=(0,s.useState)([]),[Z,ee]=(0,s.useState)(V),[ea,ei]=(0,s.useState)(!1),[er,es]=(0,s.useState)(!1),eo=(0,o.useRouter)(),{toast:el}=(0,u.dj)(),et="abogado"===H.role?H.id:void 0,en=T?T.abogado_responsable_id||("string"==typeof T.abogado_responsable?T.abogado_responsable:null==(a=T.abogado_responsable)?void 0:a.id):void 0,ec=T?{numero_causa:T.numero_causa||"",caratulado:T.caratulado,materia:T.materia||"",tribunal:T.tribunal||"",region:T.region||"",comuna:T.comuna||"",rut_cliente:T.rut_cliente||"",nombre_cliente:T.nombre_cliente,contraparte:T.contraparte||"",etapa_actual:T.etapa_actual||"Ingreso Demanda",estado:T.estado||"activo",fecha_inicio:T.fecha_inicio||new Date().toISOString().split("T")[0],abogado_responsable:en||et,cliente_principal_id:null!=(x=T.cliente_principal_id)?x:"",prioridad:T.prioridad||"media",valor_estimado:T.valor_estimado||void 0,honorario_total_uf:null!=(j=T.honorario_total_uf)?j:void 0,honorario_pagado_uf:null!=(v=T.honorario_pagado_uf)?v:void 0,honorario_variable_porcentaje:null!=(f=T.honorario_variable_porcentaje)?f:void 0,honorario_variable_base:null!=(N=T.honorario_variable_base)?N:"",honorario_moneda:null!=(y=T.honorario_moneda)?y:"UF",modalidad_cobro:null!=(P=T.modalidad_cobro)?P:"prepago",honorario_notas:null!=(R=T.honorario_notas)?R:"",tarifa_referencia:null!=(L=T.tarifa_referencia)?L:"",observaciones:T.observaciones||"",descripcion_inicial:T.descripcion_inicial||"",objetivo_cliente:T.objetivo_cliente||"",documentacion_recibida:T.documentacion_recibida||"",workflow_state:T.workflow_state||"preparacion",validado_at:T.validado_at||void 0,marcar_validado:!!T.validado_at,audiencia_inicial_tipo:void 0,audiencia_inicial_requiere_testigos:!1}:{numero_causa:"",caratulado:"",materia:"",tribunal:"",region:"",comuna:"",rut_cliente:"",nombre_cliente:"",contraparte:"",etapa_actual:"Ingreso Demanda",estado:"activo",fecha_inicio:new Date().toISOString().split("T")[0],abogado_responsable:et,cliente_principal_id:"",prioridad:"media",valor_estimado:void 0,honorario_total_uf:void 0,honorario_pagado_uf:0,honorario_variable_porcentaje:void 0,honorario_variable_base:"",honorario_moneda:"UF",modalidad_cobro:"prepago",honorario_notas:"",tarifa_referencia:"",observaciones:"",descripcion_inicial:"",objetivo_cliente:"",documentacion_recibida:"",workflow_state:"preparacion",marcar_validado:!1,audiencia_inicial_tipo:void 0,audiencia_inicial_requiere_testigos:!1},{register:ed,control:em,handleSubmit:ep,formState:{errors:eu},setValue:ex,watch:eh}=(0,l.mN)({resolver:(0,t.u)(w),defaultValues:ec}),{register:e_,handleSubmit:eb,reset:eg,formState:{errors:ej},setValue:ev,watch:ef}=(0,l.mN)({resolver:(0,t.u)(D),defaultValues:{nombre:"",email:"",rut:"",telefono:""}}),eN=eh("rut_cliente"),ey=eh("cliente_principal_id"),ew=eh("marcar_validado"),eC=eh("workflow_state");eh("modalidad_cobro");let eF=eh("honorario_moneda"),eE=eh("honorario_total_uf"),ek=eh("audiencia_inicial_tipo");eh("audiencia_inicial_requiere_testigos");let eS=eh("honorario_pagado_uf"),eJ="number"!=typeof eE||Number.isNaN(eE)?void 0:Math.max((null!=eE?eE:0)-(null!=eS?eS:0),0),eD=ef("rut"),{ref:eA,...eI}=e_("rut");(0,s.useEffect)(()=>{T||ex("workflow_state",ew?"en_revision":"preparacion")},[ew,T,ex]),(0,s.useEffect)(()=>{ee(V),0===V.length&&ei(!0)},[V]);let eY=()=>{X([]),Q.current&&(Q.current.value="")},ez=async e=>{G(!0);try{var a,i,r;let s,o=!!e.marcar_validado,l=new Date().toISOString(),t={...e,validado_at:o?null!=(i=null!=(a=e.validado_at)?a:null==T?void 0:T.validado_at)?i:l:null,workflow_state:T?e.workflow_state:o?"en_revision":"preparacion"};if((s=T?await h(T.id,t):await _(t)).success){el({title:T?"Caso actualizado":"Caso creado",description:T?"El caso ha sido actualizado exitosamente":"El nuevo caso ha sido creado exitosamente"});let e=null==(r=s.case)?void 0:r.id;if(!T&&W.length>0){if(e){let a=0,i=[];for(let r of W){let s=new FormData;s.append("case_id",e),s.append("file",r),s.append("nombre",r.name),s.append("visibilidad","privado");let o=await (0,b.X)(s);o.success?a+=1:i.push({fileName:r.name,...o.error?{message:o.error}:{}})}i.length>0?el({title:"Algunos documentos no se cargaron",description:i.map(e=>{var a;return"".concat(e.fileName,": ").concat(null!=(a=e.message)?a:"Error desconocido")}).join(", "),variant:"destructive"}):a>0&&el({title:"Documentos cargados",description:"Se cargaron ".concat(a," documento").concat(a>1?"s":""," correctamente.")})}else el({title:"Documentos no cargados",description:"No se pudo obtener el ID del caso reci\xe9n creado para adjuntar los documentos.",variant:"destructive"});eY()}eo.push(e?"/cases/".concat(e):"/cases")}else el({title:"Error",description:s.error||"Ocurri\xf3 un error inesperado",variant:"destructive"})}catch(e){console.error("Error submitting form:",e),el({title:"Error",description:"Ocurri\xf3 un error inesperado",variant:"destructive"})}finally{G(!1)}},eq=eb(async e=>{es(!0);try{let a=await (0,g.B)(e);if(a.success){let e={id:a.client.id,nombre:a.client.nombre,role:"cliente",rut:a.client.rut,telefono:a.client.telefono,email:a.client.email};ee(a=>a.some(a=>a.id===e.id)?a.map(a=>a.id===e.id?e:a):[...a,e].sort((e,a)=>e.nombre.localeCompare(a.nombre,"es"))),ex("cliente_principal_id",e.id),ex("nombre_cliente",e.nombre),e.rut&&ex("rut_cliente",e.rut),el({title:"Cliente creado",description:"".concat(e.nombre," fue a\xf1adido al directorio y seleccionado en el caso.")}),eg(),ei(!1)}else el({title:"No se pudo crear el cliente",description:a.error||"Revisa los datos e int\xe9ntalo nuevamente.",variant:"destructive"})}catch(e){console.error("Error creating client from CaseForm:",e),el({title:"Error inesperado",description:"Ocurri\xf3 un error al crear el cliente.",variant:"destructive"})}finally{es(!1)}});return(0,s.useEffect)(()=>{ek||ex("audiencia_inicial_requiere_testigos",!1)},[ek,ex]),(0,r.jsxs)(m.Zp,{className:"w-full max-w-4xl mx-auto",children:[(0,r.jsx)(m.aR,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:(0,r.jsx)(m.ZB,{children:T?"Editar Caso":"Nuevo Caso"})}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs font-semibold uppercase tracking-[0.2em]",children:[(0,r.jsx)("span",{className:"rounded-full px-3 py-1 transition ".concat(ey?"bg-slate-900 text-white shadow-sm":"bg-slate-100 text-slate-500"),children:"Paso 1 \xb7 Cliente"}),(0,r.jsx)("span",{className:"rounded-full px-3 py-1 ".concat(ey?"bg-slate-100 text-slate-600":"bg-slate-100 text-slate-400"),children:"Paso 2 \xb7 Datos del caso"})]}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Primero registra al cliente desde el directorio o cr\xe9alo aqu\xed para seleccionarlo como titular del expediente. Luego completa la informaci\xf3n legal del caso y agrega las contrapartes necesarias."})]})}),(0,r.jsx)(m.Wu,{children:(0,r.jsxs)("form",{onSubmit:ep(ez),className:"space-y-8",children:[(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Datos del caso"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Completa la informaci\xf3n general del expediente."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"numero_causa",children:"N\xfamero de Causa"}),(0,r.jsx)(c.p,{id:"numero_causa",placeholder:"C-1234-2024",...ed("numero_causa"),disabled:K}),eu.numero_causa&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.numero_causa.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"materia",children:"Materia *"}),(0,r.jsxs)("select",{id:"materia",className:"form-input",...ed("materia"),disabled:K,children:[(0,r.jsx)("option",{value:"",children:"Seleccionar materia"}),k.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),eu.materia&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.materia.message})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"caratulado",children:"Caratulado *"}),(0,r.jsx)(c.p,{id:"caratulado",placeholder:"P\xe9rez con Empresa ABC",...ed("caratulado"),disabled:K}),eu.caratulado&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.caratulado.message})]})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Cliente y contraparte"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Identifica a las partes involucradas."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"nombre_cliente",children:"Nombre del Cliente *"}),(0,r.jsx)(c.p,{id:"nombre_cliente",placeholder:"Juan P\xe9rez",...ed("nombre_cliente"),disabled:K}),eu.nombre_cliente&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.nombre_cliente.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"rut_cliente",children:"RUT del Cliente"}),(0,r.jsx)(c.p,{id:"rut_cliente",placeholder:"12.345.678-9",value:eN||"",onChange:e=>{ex("rut_cliente",(0,A.nr)(e.target.value))},disabled:K}),eu.rut_cliente&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.rut_cliente.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)(d.J,{htmlFor:"cliente_principal_id",children:"Cliente principal *"}),(0,r.jsx)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>ei(e=>!e),disabled:K,children:ea?"Cerrar":"Crear cliente"})]}),(0,r.jsx)(l.xI,{control:em,name:"cliente_principal_id",rules:{required:"Selecciona un cliente registrado para continuar."},render:e=>{let{field:a}=e;return(0,r.jsxs)("select",{id:"cliente_principal_id",className:"form-input",value:a.value||"",onChange:e=>a.onChange(e.target.value||void 0),disabled:K||0===Z.length,children:[(0,r.jsx)("option",{value:"",children:"Selecciona un cliente"}),Z.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nombre},e.id))]})}}),0===Z.length&&(0,r.jsx)("p",{className:"text-xs font-medium text-red-500",children:"No hay clientes registrados. Crea primero el cliente para habilitar la creaci\xf3n del caso."}),eu.cliente_principal_id&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.cliente_principal_id.message}),ea&&(0,r.jsxs)("form",{onSubmit:eq,className:"mt-4 space-y-3 rounded-md border border-gray-200 bg-gray-50 p-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"new_client_nombre",children:"Nombre del cliente"}),(0,r.jsx)(c.p,{id:"new_client_nombre",placeholder:"Juana P\xe9rez",...e_("nombre"),disabled:er}),ej.nombre&&(0,r.jsx)("p",{className:"text-xs text-red-600",children:ej.nombre.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"new_client_email",children:"Correo"}),(0,r.jsx)(c.p,{id:"new_client_email",type:"email",placeholder:"cliente@correo.com",...e_("email"),disabled:er}),ej.email&&(0,r.jsx)("p",{className:"text-xs text-red-600",children:ej.email.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"new_client_rut",children:"RUT"}),(0,r.jsx)(c.p,{id:"new_client_rut",placeholder:"12.345.678-9",name:eI.name,ref:eA,onBlur:eI.onBlur,value:eD||"",onChange:e=>{ev("rut",(0,A.nr)(e.target.value),{shouldDirty:!0,shouldValidate:!0})},disabled:er}),ej.rut&&(0,r.jsx)("p",{className:"text-xs text-red-600",children:ej.rut.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"new_client_telefono",children:"Tel\xe9fono"}),(0,r.jsx)(c.p,{id:"new_client_telefono",placeholder:"+56 9 1234 5678",...e_("telefono"),disabled:er}),ej.telefono&&(0,r.jsx)("p",{className:"text-xs text-red-600",children:ej.telefono.message})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(n.$,{type:"button",variant:"ghost",onClick:()=>{eg(),ei(!1)},disabled:er,children:"Cancelar"}),(0,r.jsx)(n.$,{type:"submit",disabled:er,children:er?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Guardando..."]}):"Guardar cliente"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"contraparte",children:"Contraparte"}),(0,r.jsx)(c.p,{id:"contraparte",placeholder:"Empresa ABC S.A.",...ed("contraparte"),disabled:K}),eu.contraparte&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.contraparte.message})]})]})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Detalle procesal"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Ingresa la informaci\xf3n requerida por Supabase para seguimiento."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"tribunal",children:"Tribunal"}),(0,r.jsx)(c.p,{id:"tribunal",placeholder:"1\xb0 Juzgado Civil de Santiago",...ed("tribunal"),disabled:K}),eu.tribunal&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.tribunal.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"region",children:"Regi\xf3n"}),(0,r.jsxs)("select",{id:"region",className:"form-input",...ed("region"),disabled:K,children:[(0,r.jsx)("option",{value:"",children:"Seleccionar regi\xf3n"}),S.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),eu.region&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.region.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"comuna",children:"Comuna"}),(0,r.jsx)(c.p,{id:"comuna",placeholder:"Santiago",...ed("comuna"),disabled:K}),eu.comuna&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.comuna.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"fecha_inicio",children:"Fecha de Inicio"}),(0,r.jsx)(c.p,{id:"fecha_inicio",type:"date",...ed("fecha_inicio"),disabled:K}),eu.fecha_inicio&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.fecha_inicio.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"valor_estimado",children:"Valor Estimado (CLP)"}),(0,r.jsx)(c.p,{id:"valor_estimado",type:"number",placeholder:"5000000",...ed("valor_estimado",{valueAsNumber:!0}),disabled:K}),eu.valor_estimado&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.valor_estimado.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"estado",children:"Estado actual"}),(0,r.jsx)("select",{id:"estado",className:"form-input",...ed("estado"),disabled:K,children:C.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),eu.estado&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.estado.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"prioridad",children:"Prioridad"}),(0,r.jsx)("select",{id:"prioridad",className:"form-input",...ed("prioridad"),disabled:K,children:F.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),eu.prioridad&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.prioridad.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"etapa_actual",children:"Etapa actual"}),(0,r.jsx)(c.p,{id:"etapa_actual",placeholder:"Ingreso Demanda",...ed("etapa_actual"),disabled:K}),eu.etapa_actual&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.etapa_actual.message})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"observaciones",children:"Observaciones"}),(0,r.jsx)(p.T,{id:"observaciones",rows:4,placeholder:"Observaciones adicionales, riesgos o comentarios internos.",...ed("observaciones"),disabled:K}),eu.observaciones&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.observaciones.message})]})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Audiencias iniciales"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Define el tipo de audiencia que esperas como primer hito y si requerir\xe1 coordinaci\xf3n de testigos."})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(d.J,{children:"Tipo de audiencia inicial"}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 rounded-lg border px-3 py-2 text-sm transition ".concat(ek?"border-slate-200 bg-white text-slate-700":"border-slate-200 bg-slate-50 text-slate-600"),children:[(0,r.jsx)("input",{type:"radio",value:"",className:"text-slate-600",...ed("audiencia_inicial_tipo")}),"Sin audiencia definida por ahora"]}),J.Od.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 rounded-lg border px-3 py-2 text-sm transition ".concat(ek===e.value?"border-sky-300 bg-sky-50 text-sky-700":"border-slate-200 bg-white text-slate-700"),children:[(0,r.jsx)("input",{type:"radio",value:e.value,className:"text-slate-600",...ed("audiencia_inicial_tipo")}),e.label]},e.value))]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(d.J,{children:"Participaci\xf3n de testigos"}),(0,r.jsx)(l.xI,{control:em,name:"audiencia_inicial_requiere_testigos",render:e=>{let{field:a}=e;return(0,r.jsxs)("label",{className:"flex items-center gap-2 rounded-lg border px-3 py-2 text-sm transition ".concat(ek?"border-slate-200 bg-white text-slate-700":"border-dashed border-slate-200 bg-slate-50 text-slate-500"),children:[(0,r.jsx)("input",{type:"checkbox",className:"rounded border-slate-300",checked:!!a.value,onChange:e=>a.onChange(e.target.checked),onBlur:a.onBlur,ref:a.ref,name:a.name,disabled:!ek}),"Se coordinar\xe1n testigos para esta audiencia"]})}}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Esta marca solo aplica si defines una audiencia inicial y se reflejar\xe1 en la primera etapa del timeline."})]})]})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Honorarios y cobro prepago"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Define c\xf3mo se cobrar\xe1 este caso. El timeline bloquear\xe1 etapas hasta registrar el pago correspondiente."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"modalidad_cobro",children:"Modalidad de cobro"}),(0,r.jsxs)("select",{id:"modalidad_cobro",className:"form-input",...ed("modalidad_cobro"),disabled:K,children:[(0,r.jsx)("option",{value:"prepago",children:"Prepago por etapas"}),(0,r.jsx)("option",{value:"postpago",children:"Postpago"}),(0,r.jsx)("option",{value:"mixto",children:"Mixto"})]}),eu.modalidad_cobro&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.modalidad_cobro.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"honorario_moneda",children:"Moneda base"}),(0,r.jsxs)("select",{id:"honorario_moneda",className:"form-input",...ed("honorario_moneda"),disabled:K,children:[(0,r.jsx)("option",{value:"UF",children:"UF"}),(0,r.jsx)("option",{value:"CLP",children:"CLP"}),(0,r.jsx)("option",{value:"USD",children:"USD"})]}),eu.honorario_moneda&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.honorario_moneda.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"tarifa_referencia",children:"Tarifa de referencia"}),(0,r.jsx)(c.p,{id:"tarifa_referencia",placeholder:"Ej: civil_juicio_ordinario_mayor_cuantia",...ed("tarifa_referencia"),disabled:K}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Usa el identificador definido en la tabla de tarifas de Xel Chile para asociar el timeline autom\xe1ticamente."}),eu.tarifa_referencia&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.tarifa_referencia.message})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"honorario_total_uf",children:"Honorario total (UF)"}),(0,r.jsx)(c.p,{id:"honorario_total_uf",type:"number",min:"0",step:"0.01",placeholder:"30",...ed("honorario_total_uf",{valueAsNumber:!0}),disabled:K||"UF"!==eF}),"UF"!==eF&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Para otras monedas detalla el valor en notas."}),eu.honorario_total_uf&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.honorario_total_uf.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"honorario_pagado_uf",children:"Monto pagado (UF)"}),(0,r.jsx)(c.p,{id:"honorario_pagado_uf",type:"number",min:"0",step:"0.01",placeholder:"0",...ed("honorario_pagado_uf",{valueAsNumber:!0}),disabled:K||"UF"!==eF}),eu.honorario_pagado_uf&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.honorario_pagado_uf.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{children:"Saldo pendiente (UF)"}),(0,r.jsx)("div",{className:"h-10 flex items-center rounded-md border border-dashed border-gray-300 px-3 text-sm font-medium text-gray-700 bg-gray-50",children:void 0!==eJ?null==eJ||Number.isNaN(eJ)?"—":"".concat(new Intl.NumberFormat("es-CL",{minimumFractionDigits:2,maximumFractionDigits:2}).format(eJ)," UF"):"—"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"honorario_variable_porcentaje",children:"Componente variable (%)"}),(0,r.jsx)(c.p,{id:"honorario_variable_porcentaje",type:"number",min:"0",max:"100",step:"0.1",placeholder:"10",...ed("honorario_variable_porcentaje",{valueAsNumber:!0}),disabled:K}),eu.honorario_variable_porcentaje&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.honorario_variable_porcentaje.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"honorario_variable_base",children:"Base del variable"}),(0,r.jsx)(p.T,{id:"honorario_variable_base",rows:2,placeholder:"Ej: 10% de lo obtenido o de lo ahorrado por la defensa.",...ed("honorario_variable_base"),disabled:K}),eu.honorario_variable_base&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.honorario_variable_base.message})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"honorario_notas",children:"Notas de honorarios"}),(0,r.jsx)(p.T,{id:"honorario_notas",rows:3,placeholder:"Detalle acuerdos espec\xedficos, descuentos, o condiciones especiales.",...ed("honorario_notas"),disabled:K}),eu.honorario_notas&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.honorario_notas.message})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4 text-sm text-blue-900",children:[(0,r.jsx)("p",{className:"font-medium",children:"Prepago por etapas"}),(0,r.jsx)("p",{className:"mt-1",children:"El cliente podr\xe1 avanzar pagando etapa por etapa. Cada fase del timeline exigir\xe1 un pago registrado para habilitar las acciones del equipo jur\xeddico. Puedes copiar y compartir los enlaces de Payku desde el detalle del caso."})]})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Informaci\xf3n inicial"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Describe el contexto y los objetivos del cliente para una correcta asignaci\xf3n."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"descripcion_inicial",children:"Descripci\xf3n inicial *"}),(0,r.jsx)(p.T,{id:"descripcion_inicial",rows:5,placeholder:"Resumen del caso, antecedentes relevantes y hechos principales.",...ed("descripcion_inicial"),disabled:K}),eu.descripcion_inicial&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.descripcion_inicial.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"objetivo_cliente",children:"Objetivo del cliente"}),(0,r.jsx)(p.T,{id:"objetivo_cliente",rows:4,placeholder:"\xbfQu\xe9 espera lograr el cliente con este procedimiento?",...ed("objetivo_cliente"),disabled:K}),eu.objetivo_cliente&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.objetivo_cliente.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"documentacion_recibida",children:"Documentaci\xf3n recibida"}),(0,r.jsx)(p.T,{id:"documentacion_recibida",rows:4,placeholder:"Detalle la documentaci\xf3n entregada por el cliente (contratos, boletas, respaldos, etc.).",...ed("documentacion_recibida"),disabled:K}),eu.documentacion_recibida&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.documentacion_recibida.message})]})]}),!T&&(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Documentos de respaldo"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Adjunta antecedentes relevantes para el equipo. Tama\xf1o m\xe1ximo de 20 MB por archivo."})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"case_documents",children:"Archivos"}),(0,r.jsxs)("div",{className:"space-y-3 rounded-md border border-dashed border-muted-foreground/40 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)(Y.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{children:"Selecciona uno o m\xe1s archivos de hasta 20 MB cada uno."})]}),W.length>0&&(0,r.jsxs)(n.$,{type:"button",variant:"ghost",size:"sm",onClick:eY,disabled:K,children:[(0,r.jsx)(z.A,{className:"mr-2 h-4 w-4"}),"Limpiar selecci\xf3n"]})]}),(0,r.jsx)(c.p,{id:"case_documents",type:"file",multiple:!0,onChange:e=>{var a;let i=Array.from(null!=(a=e.target.files)?a:[]);if(0===i.length)return;let r=i.filter(e=>e.size>0x1400000);r.length>0&&el({title:"Archivo demasiado grande",description:"Los siguientes archivos superan el l\xedmite de 20 MB: ".concat(r.map(e=>e.name).join(", ")),variant:"destructive"});let s=i.filter(e=>e.size<=0x1400000);s.length>0&&X(e=>{let a=new Set(e.map(e=>"".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified))),i=s.filter(e=>{let i="".concat(e.name,"-").concat(e.size,"-").concat(e.lastModified);return!a.has(i)&&(a.add(i),!0)});return 0===i.length?e:[...e,...i]}),e.target.value=""},disabled:K,ref:Q}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Se aceptan archivos PDF, Word, im\xe1genes y texto. M\xe1ximo 20 MB por archivo."})]})]}),W.length>0&&(0,r.jsx)("ul",{className:"space-y-2",children:W.map((e,a)=>{var i;return(0,r.jsxs)("li",{className:"flex items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(q.A,{className:"h-4 w-4 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:(i=e.size)>=1048576?"".concat((i/1048576).toFixed(1)," MB"):i>=1024?"".concat((i/1024).toFixed(1)," KB"):"".concat(i," B")})]})]}),(0,r.jsx)(n.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>{X(e=>e.filter((e,i)=>i!==a)),Q.current&&(Q.current.value="")},disabled:K,"aria-label":"Quitar ".concat(e.name),children:(0,r.jsx)(U.A,{className:"h-4 w-4 text-gray-500"})})]},"".concat(e.name,"-").concat(e.lastModified,"-").concat(a))})})]})]}),(0,r.jsxs)("section",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Asignaci\xf3n y workflow"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Define qui\xe9n liderar\xe1 el caso y el estado interno del expediente."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"abogado_responsable",children:"Abogado responsable"}),(0,r.jsx)(l.xI,{control:em,name:"abogado_responsable",render:e=>{let{field:a}=e;return(0,r.jsxs)("select",{id:"abogado_responsable",className:"form-input",value:a.value||"",onChange:e=>a.onChange(e.target.value||void 0),disabled:K||0===$.length,children:[(0,r.jsx)("option",{value:"",children:"Selecciona un abogado"}),$.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nombre},e.id))]})}}),0===$.length&&(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"No hay abogados disponibles. Un administrador debe registrarlos."}),eu.abogado_responsable&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.abogado_responsable.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"workflow_state",children:"Estado interno"}),(0,r.jsx)("select",{id:"workflow_state",className:"form-input",...ed("workflow_state"),disabled:K,children:E.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),eu.workflow_state&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:eu.workflow_state.message})]})]}),(0,r.jsxs)("div",{className:"rounded-md border border-gray-200 bg-gray-50 p-4",children:[(0,r.jsxs)("label",{className:"flex items-start space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",...ed("marcar_validado"),disabled:K}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:"Marcar caso como validado y listo para asignaci\xf3n"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Al validar el caso se notificar\xe1 al abogado responsable y al cliente principal, y se activar\xe1 el timeline autom\xe1tico."})]})]}),eu.marcar_validado&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-2",children:eu.marcar_validado.message}),ew&&(0,r.jsxs)("div",{className:"mt-3 text-sm text-blue-700 bg-blue-50 border border-blue-200 rounded-md p-3",children:["Revisa que la informaci\xf3n est\xe9 completa. El workflow pasar\xe1 a ",(0,r.jsxs)("strong",{children:['"',null!=(B=null==(i=E.find(e=>e.value===eC))?void 0:i.label)?B:"Revisi\xf3n interna",'"']})," y el equipo recibir\xe1 un resumen del caso junto al timeline sugerido."]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[O&&(0,r.jsxs)(n.$,{type:"button",variant:"outline",onClick:O,disabled:K,children:[(0,r.jsx)(z.A,{className:"w-4 h-4 mr-2"}),"Cancelar"]}),(0,r.jsx)(n.$,{type:"submit",disabled:K||!ey,children:K?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2 animate-spin"}),T?"Actualizando...":"Creando..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.A,{className:"w-4 h-4 mr-2"}),T?"Actualizar Caso":"Crear Caso"]})})]})]})})]})}},28598:(e,a,i)=>{"use strict";i.d(a,{B:()=>s});var r=i(59030);let s=(0,r.createServerReference)("406bc1e57d930aa66be0c359227cb415ca860d3043",r.callServer,void 0,r.findSourceMapURL,"createClientProfile")},40918:(e,a,i)=>{"use strict";i.d(a,{p:()=>l});var r=i(11291),s=i(97451),o=i(93293);let l=s.forwardRef((e,a)=>{let{className:i,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,o.cn)("flex h-11 w-full rounded-2xl border border-white/30 bg-white/70 px-4 text-sm text-foreground/80 shadow-inner ring-offset-transparent transition-all placeholder:text-foreground/40 focus-visible:border-primary focus-visible:bg-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 disabled:cursor-not-allowed disabled:opacity-60",i),ref:a,...l})});l.displayName="Input"},57965:(e,a,i)=>{Promise.resolve().then(i.bind(i,28009))},73244:(e,a,i)=>{"use strict";i.d(a,{J:()=>c});var r=i(11291),s=i(97451),o=i(23838),l=i(11263),t=i(93293);let n=(0,l.F)("text-sm font-medium leading-none text-foreground/75 peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,a)=>{let{className:i,...s}=e;return(0,r.jsx)(o.b,{ref:a,className:(0,t.cn)(n(),i),...s})});c.displayName=o.b.displayName}},e=>{e.O(0,[936,577,625,984,193,55,358],()=>e(e.s=57965)),_N_E=e.O()}]);