(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{25126:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,64787,23)),Promise.resolve().then(a.bind(a,59527))},26181:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});let l=(0,a(92608).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},59527:(e,s,a)=>{"use strict";a.d(s,{CaseDetailView:()=>M});var l=a(11291),t=a(97451),i=a(95876),r=a(82596),c=a(9983),n=a(90718),d=a(19428),m=a(79667),x=a(43977),o=a(25361),h=a(97301),p=a(93293),b=a(69719),j=a(96843),g=a(68671),u=a(64501),N=a(26181),v=a(92608);let f=(0,v.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var y=a(62490);let w=(0,v.A)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var A=a(27416),_=a(77297),k=a(89740),C=a(90465);let q=(0,v.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function M(e){var s,a,v,M,R;let{case:E,profile:I,messages:P}=e,[S,D]=(0,t.useState)("overview"),U=(0,i.useRouter)(),z="admin_firma"===I.role||"abogado"===I.role&&(null==(s=E.abogado_responsable)?void 0:s.id)===I.id,H="cliente"!==I.role,L="cliente"!==I.role,Z="cliente"!==I.role,$=[{id:"overview",label:"Resumen",icon:b.A},{id:"timeline",label:"Timeline",icon:j.A},{id:"documents",label:"Documentos",icon:g.A},{id:"notes",label:"Notas",icon:u.A},{id:"messages",label:"Mensajes",icon:u.A},{id:"requests",label:"Solicitudes",icon:u.A},...z?[{id:"clients",label:"Clientes",icon:N.A}]:[]];return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>U.back(),children:[(0,l.jsx)(f,{className:"h-4 w-4 mr-2"}),"Volver"]}),(0,l.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,l.jsx)(b.A,{className:"h-6 w-6 text-blue-600"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Detalle del Caso"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"LEXSER"})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[z&&(0,l.jsxs)(n.$,{size:"sm",variant:"outline",children:[(0,l.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Editar Caso"]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900",children:I.nombre}),(0,l.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:I.role.replace("_"," ")})]}),(0,l.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center text-white font-medium text-sm",style:{backgroundColor:(0,p.qA)(I.nombre)},children:(0,p.IM)(I.nombre)})]})]})})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsx)(r.Zp,{className:"mb-8",children:(0,l.jsxs)(r.Wu,{className:"pt-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:E.caratulado}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-4",children:[E.numero_causa&&(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"Causa: ",E.numero_causa]}),E.materia&&(0,l.jsxs)("span",{children:["Materia: ",E.materia]}),E.tribunal&&(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(w,{className:"h-4 w-4 mr-1"}),E.tribunal]})]})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(M=E.estado||"activo",(0,l.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({activo:"bg-green-100 text-green-800",suspendido:"bg-yellow-100 text-yellow-800",archivado:"bg-gray-100 text-gray-800",terminado:"bg-blue-100 text-blue-800"}[M]||"bg-gray-100 text-gray-800"),children:M.charAt(0).toUpperCase()+M.slice(1)})),E.prioridad&&(R=E.prioridad,(0,l.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({baja:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",urgente:"bg-red-100 text-red-800"}[R]||"bg-gray-100 text-gray-800"),children:R.charAt(0).toUpperCase()+R.slice(1)})),E.etapa_actual&&(0,l.jsx)(c.E,{variant:"outline",children:E.etapa_actual})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[E.abogado_responsable&&(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"font-medium text-blue-900 mb-2 flex items-center",children:[(0,l.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Abogado Responsable"]}),(0,l.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,l.jsx)("p",{className:"font-medium text-blue-800",children:E.abogado_responsable.nombre}),E.abogado_responsable.telefono&&(0,l.jsxs)("p",{className:"flex items-center text-blue-700",children:[(0,l.jsx)(_.A,{className:"h-3 w-3 mr-1"}),E.abogado_responsable.telefono]}),E.abogado_responsable.email&&(0,l.jsxs)("p",{className:"flex items-center text-blue-700",children:[(0,l.jsx)(k.A,{className:"h-3 w-3 mr-1"}),E.abogado_responsable.email]})]})]}),E.nombre_cliente&&(0,l.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"font-medium text-green-900 mb-2 flex items-center",children:[(0,l.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Cliente"]}),(0,l.jsx)("p",{className:"text-sm font-medium text-green-800",children:E.nombre_cliente}),E.rut_cliente&&(0,l.jsxs)("p",{className:"text-sm text-green-700",children:["RUT: ",E.rut_cliente]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"font-medium text-purple-900 mb-2 flex items-center",children:[(0,l.jsx)(C.A,{className:"h-4 w-4 mr-2"}),"Fechas"]}),(0,l.jsxs)("div",{className:"space-y-1 text-sm text-purple-700",children:[E.fecha_inicio&&(0,l.jsxs)("p",{children:["Inicio: ",(0,p.Yq)(E.fecha_inicio)]}),E.fecha_termino&&(0,l.jsxs)("p",{children:["T\xe9rmino: ",(0,p.Yq)(E.fecha_termino)]})]})]}),E.valor_estimado&&(0,l.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,l.jsxs)("h3",{className:"font-medium text-yellow-900 mb-2 flex items-center",children:[(0,l.jsx)(q,{className:"h-4 w-4 mr-2"}),"Valor Estimado"]}),(0,l.jsx)("p",{className:"text-lg font-bold text-yellow-800",children:(0,p.vv)(E.valor_estimado)})]})]}),E.contraparte&&(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Contraparte"}),(0,l.jsx)("p",{className:"text-gray-700",children:E.contraparte})]}),E.observaciones&&(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Observaciones"}),(0,l.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:E.observaciones})]})]})}),(0,l.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,l.jsx)("nav",{className:"-mb-px flex space-x-8",children:$.map(e=>{let s=e.icon;return(0,l.jsxs)("button",{onClick:()=>D(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(S===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,l.jsx)(s,{className:"h-4 w-4"}),(0,l.jsx)("span",{children:e.label})]},e.id)})})}),(0,l.jsxs)("div",{children:["overview"===S&&(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsx)(x.S,{caseId:E.id,caseMateria:null!=(a=E.materia)?a:"General",canManageStages:z,showPrivateStages:Z})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(m.$,{caseId:E.id,canUpload:z,canEdit:z,canDelete:z,showPrivateDocuments:Z}),(0,l.jsx)(o.L,{caseId:E.id,canCreateRequests:!0,canRespondRequests:L,showPrivateRequests:Z})]})]}),"timeline"===S&&(0,l.jsx)(x.S,{caseId:E.id,caseMateria:null!=(v=E.materia)?v:"General",canManageStages:z,showPrivateStages:Z}),"documents"===S&&(0,l.jsx)(m.$,{caseId:E.id,canUpload:z,canEdit:z,canDelete:z,showPrivateDocuments:Z}),"notes"===S&&(0,l.jsx)(d._,{caseId:E.id,canCreateNotes:H,canEditNotes:H,showPrivateNotes:Z}),"messages"===S&&(0,l.jsx)(h.B,{caseId:E.id,initialMessages:P,currentProfileId:I.id,allowSend:"cliente"!==I.role}),"requests"===S&&(0,l.jsx)(o.L,{caseId:E.id,canCreateRequests:!0,canRespondRequests:L,showPrivateRequests:Z}),"clients"===S&&z&&(0,l.jsx)("div",{className:"space-y-6",children:E.clients&&E.clients.length>0&&(0,l.jsxs)(r.Zp,{children:[(0,l.jsx)(r.aR,{children:(0,l.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(N.A,{className:"h-5 w-5"}),"Clientes Asociados (",E.clients.length,")"]})}),(0,l.jsx)(r.Wu,{children:(0,l.jsx)("div",{className:"space-y-3",children:E.clients.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-full flex items-center justify-center text-white font-medium",style:{backgroundColor:(0,p.qA)(e.nombre)},children:(0,p.IM)(e.nombre)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:e.nombre}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(k.A,{className:"h-3 w-3 mr-1"}),e.email]}),e.telefono&&(0,l.jsxs)("span",{className:"flex items-center",children:[(0,l.jsx)(_.A,{className:"h-3 w-3 mr-1"}),e.telefono]})]})]})]}),(0,l.jsx)(c.E,{variant:"outline",children:"Cliente"})]},e.id))})})]})})]})]})]})}}},e=>{e.O(0,[936,787,577,243,433,193,55,358],()=>e(e.s=25126)),_N_E=e.O()}]);